(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{259:function(e,t,n){"use strict";var r=n(166),o=n(348),c=n(44),a=n(118),i=n(349),s=n(5),u=n.n(s),l=n(9),f=n.n(l),d=n(10),p=n.n(d),b=n(338),j=n(344),h=n(189),O=n(0),m=n.n(O);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=n(238);function v(){return Object(x.a)()}var w=n(340),P=n(341),D=n(162),S=n(345),E=n(12),T=n(18),I=n.n(T),k=n(55),C=n(11),R=n(78),A=n(239),_={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc",borderColor:"rgb(0, 255, 0)"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff",borderColor:"rgb(0, 255, 0)"}},L=n(41),N=n(90),B=L.a.get("window"),M=B.width,W=(B.height,function(){return L.a.get("window").height}),q=M/320;function U(e){var t=e*q;return"ios"===E.a.OS?Math.round(N.a.roundToNearestPixel(t)):Math.round(N.a.roundToNearestPixel(t))-2}var H=M<600,V=("android"===E.a.OS||E.a.OS,E.a.OS,E.a.OS,n(6)),z=["style","lightColor","darkColor"],F=["style","lightColor","darkColor"],G=["style","lightColor","darkColor"],J=["style","lightColor","darkColor","border"],K=["style","lightColor","darkColor","onPress","label"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t){var n=v(),r=e[n];return r||_[n][t]}function $(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=I()(e,z),c=Z({light:n,dark:r},"text");return Object(V.jsx)(k.a,Y({style:[{color:c,margin:"auto"},t]},o))}function Q(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=I()(e,F),c=Z({light:n,dark:r},"background");return Object(V.jsx)(C.a,Y({style:[{backgroundColor:c},t]},o))}function ee(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=I()(e,G),c=Z({light:n,dark:r},"background");return Object(V.jsx)(C.a,Y({style:[{backgroundColor:c,paddingTop:U(8)},t]},o))}function te(){return Object(V.jsx)(Q,{style:{marginVertical:U(10),height:1,width:U(300)},lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"})}function ne(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=e.border,c=I()(e,J),a=Z({light:n,dark:r},"text"),i=e.label;return i?Object(V.jsx)(Q,{style:[{width:U(300),marginBottom:10,justifyContent:"center",alignItems:"center",borderWidth:0}],children:Object(V.jsxs)(Q,{style:{borderWidth:0},children:[Object(V.jsx)($,{style:{marginLeft:1,marginBottom:2},children:i}),Object(V.jsx)(R.a,Y({style:[{color:a,borderColor:a,width:U(300),maxWidth:500,borderRadius:5,padding:3,paddingBottom:5,paddingLeft:5,borderWidth:o?1:0},t]},c))]})}):Object(V.jsx)(R.a,Y({style:[{color:a,borderColor:a,borderWidth:0,width:U(300),maxWidth:500,borderRadius:5,padding:3,paddingBottom:5,paddingLeft:5},t]},c))}function re(e){var t=e.style,n=(e.lightColor,e.darkColor,e.onPress),r=e.label,o=I()(e,K);return Object(V.jsx)(A.a,Y(Y({style:[{backgroundColor:o.disabled?"rgba(35, 134, 38, 0.45)":"rgba(35, 134, 38, 0.9)",borderWidth:1,padding:5,borderRadius:5,width:U(300),maxWidth:500,alignItems:"center",marginTop:U(5),borderColor:"rgba(240,246,252,0.1)",zIndex:1},t],onPress:n},o),{},{children:Object(V.jsx)($,{style:{color:"white"},children:r})}))}var oe,ce=function(e){var t=e.route.params.component;return Object(V.jsxs)(Q,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[t,Object(V.jsx)(r.a,{style:"ios"===E.a.OS?"light":"auto"})]})},ae={prefixes:[n(260).a("/Warehouse/")],config:{screens:{Warehouse:{path:"Warehouse"},ItemsListScreen:{path:"ItemsListScreen"},PartnersListScreen:{path:"PartnersListScreen"},Register:"Register",Modal:"modal"}}},ie=n(342),se=n(48),ue=n(72),le=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},fe=n(87);!function(e){e[e.Dev=0]="Dev",e[e.Testing=1]="Testing",e[e.Production=2]="Production"}(oe||(oe={}));var de=oe.Production,pe=oe.Production,be=oe.Production,je=function(e){switch(e){case oe.Dev:return"https://localhost:5001/";case oe.Testing:return"https://warehouse-magnus-testing.azurewebsites.net/";case oe.Production:return"https://warehouse-magnus.azurewebsites.net/"}}(de),he=function(e){switch(e){case oe.Dev:return"https://localhost:7206/api";case oe.Testing:case oe.Production:return"https://magnus-sso.azurewebsites.net/api"}}(pe),Oe=function(e){switch(e){case oe.Dev:return"http://192.168.0.129:19006";case oe.Testing:case oe.Production:return"https://magnus2311.github.io/Warehouse"}}(be);function me(e){var t,n,r=arguments;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=r.length>1&&void 0!==r[1]&&r[1],o.next=3,p.a.awrap(fetch(""+(t?he:je)+e));case 3:if(!(n=o.sent).ok){o.next=14;break}return o.prev=5,o.next=8,p.a.awrap(n.json());case 8:return o.abrupt("return",o.sent);case 11:throw o.prev=11,o.t0=o.catch(5),o.t0;case 14:return o.abrupt("return",{});case 15:case"end":return o.stop()}}),null,null,[[5,11]],Promise)}function ye(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(fetch(""+je+e,{method:"PUT",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 2:return n=r.sent,r.abrupt("return",n.ok);case 4:case"end":return r.stop()}}),null,null,null,Promise)}function ge(e,t){var n,r,o=arguments;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=o.length>2&&void 0!==o[2]&&o[2],c.next=3,p.a.awrap(fetch(""+(n?he:je)+e,{method:"POST",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 3:if(!(r=c.sent).ok){c.next=14;break}return c.prev=5,c.next=8,p.a.awrap(r.json());case 8:return c.abrupt("return",c.sent);case 11:throw c.prev=11,c.t0=c.catch(5),c.t0;case 14:return c.abrupt("return",{});case 15:case"end":return c.stop()}}),null,null,[[5,11]],Promise)}function xe(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(fetch(""+je+e,{method:"DELETE",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 2:return n=r.sent,r.abrupt("return",n.ok);case 4:case"end":return r.stop()}}),null,null,null,Promise)}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=function(){var e,t,n,r,o;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r={},c.next=3,p.a.awrap(Ee());case 3:if(c.t0=e=c.sent,null==c.t0){c.next=8;break}c.t1=e,c.next=9;break;case 8:c.t1="";case 9:return r.accessToken=c.t1,c.next=12,p.a.awrap(Se());case 12:if(c.t2=t=c.sent,null==c.t2){c.next=17;break}c.t3=t,c.next=18;break;case 17:c.t3="";case 18:return r.refreshToken=c.t3,c.next=21,p.a.awrap(Te());case 21:if(c.t4=n=c.sent,null==c.t4){c.next=26;break}c.t5=n,c.next=27;break;case 26:c.t5={};case 27:return o=c.t5,r.username=o.username,r.email=o.email,c.abrupt("return",r);case 31:case"end":return c.stop()}}),null,null,null,Promise)},De=function(e){var t,n,r,o,c;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=JSON.stringify({username:e.username,email:e.email}),a.next=4,p.a.awrap(fe.a.setItem("@USER_STORAGE_KEY",t));case 4:return n={value:e.accessToken,created:new Date},r=JSON.stringify(n),a.next=8,p.a.awrap(fe.a.setItem("@USER_STORAGE_ACCESS_TOKEN",r));case 8:return o={value:e.refreshToken,created:new Date},c=JSON.stringify(o),a.next=12,p.a.awrap(fe.a.setItem("@USER_STORAGE_REFRESH_TOKEN",c));case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}}),null,null,[[0,14]],Promise)},Se=function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(fe.a.getItem("@USER_STORAGE_REFRESH_TOKEN"));case 3:if(null===(e=n.sent)){n.next=13;break}if(t=JSON.parse(e),!((new Date).setHours(new Date(t.created).getHours()+1)>=(new Date).getHours())){n.next=11;break}return n.abrupt("return",t.value);case 11:return n.next=13,p.a.awrap(fe.a.removeItem("@USER_STORAGE_REFRESH_TOKEN"));case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.log(n.t0);case 18:return n.abrupt("return",null);case 19:case"end":return n.stop()}}),null,null,[[0,15]],Promise)},Ee=function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(fe.a.getItem("@USER_STORAGE_ACCESS_TOKEN"));case 3:if(null===(e=n.sent)){n.next=14;break}if(!(t=JSON.parse(e)).value||""===t.value){n.next=14;break}if(!((new Date).setHours(new Date(t.created).getHours()+1)>=(new Date).getHours())){n.next=12;break}return n.abrupt("return",t.value);case 12:return n.next=14,p.a.awrap(fe.a.removeItem("@USER_STORAGE_ACCESS_TOKEN"));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),console.log(n.t0);case 19:return n.abrupt("return",null);case 20:case"end":return n.stop()}}),null,null,[[0,16]],Promise)},Te=function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(fe.a.getItem("@USER_STORAGE_KEY"));case 3:if(null===(e=n.sent)){n.next=8;break}if(!(t=JSON.parse(e))){n.next=8;break}return n.abrupt("return",t);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:return n.abrupt("return",null);case 14:case"end":return n.stop()}}),null,null,[[0,10]],Promise)};function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce,Re,Ae=function(e){return function(t){(function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=p.a,n.t1=ge,n.t2=we,n.t3=we({},e),n.t4={},n.next=7,p.a.awrap(Ee());case 7:return n.t5=n.sent,n.next=10,p.a.awrap(Se());case 10:return n.t6=n.sent,n.t7={accessToken:n.t5,refreshToken:n.t6},n.t8=(0,n.t2)(n.t3,n.t4,n.t7),n.t9=(0,n.t1)("/users/login",n.t8,!0),n.next=16,n.t0.awrap.call(n.t0,n.t9);case 16:return t=n.sent,n.next=19,p.a.awrap(De(t));case 19:return n.abrupt("return",t);case 20:case"end":return n.stop()}}),null,null,null,Promise)})(e).then((function(e){t(function(e){return{type:"LOGIN_USER",user:e}}(e))}))}},_e=function(e){return function(t){t(function(e){return{type:"INIT_USER",user:e}}(e))}},Le={username:"",email:"",accessToken:"",refreshToken:""},Ne=Object(c.b)(null,(function(e){return{onLogin:function(t){e(Ae(t))}}}))((function(e){var t=e.onLogin,n=Object(O.useState)(""),r=f()(n,2),o=r[0],c=r[1],a=Object(O.useState)(""),i=f()(a,2),s=i[0],u=i[1];Object(se.p)();return Object(V.jsxs)(Q,{style:{flex:1,alignItems:"center",justifyContent:"flex-start"},children:[Object(V.jsx)(Q,{children:Object(V.jsx)($,{children:"Login in Warehouse"})}),Object(V.jsx)(ne,{onChangeText:function(e){c(e)},value:o,label:"Username",placeholder:"Enter your username",autoFocus:!0,border:!0}),Object(V.jsx)(ne,{onChangeText:function(e){u(e)},value:s,label:"Password",placeholder:"Enter your password",keyboardType:"visible-password",border:!0,secureTextEntry:!0}),Object(V.jsx)(re,{onPress:function(){var e=le(o);t({username:e?"":o,email:e?o:"",password:s})},style:{width:"100%"},label:"Login"})]})}));!function(e){e[e.Warehouse=1]="Warehouse"}(Ce||(Ce={})),function(e){e[e.Email=0]="Email",e[e.Username=1]="Username",e[e.Password=2]="Password",e[e.ConfirmPassword=3]="ConfirmPassword"}(Re||(Re={}));var Be=function(){var e=Object(O.useState)(!0),t=f()(e,2),n=t[0],r=t[1],o=Object(O.useState)(!0),c=f()(o,2),a=(c[0],c[1]),i=Object(O.useState)(""),s=f()(i,2),u=s[0],l=s[1],d=Object(O.useState)(!0),p=f()(d,2),b=p[0],j=p[1],h=Object(O.useState)(!1),m=f()(h,2),y=m[0],g=m[1],x=Object(O.useState)(""),v=f()(x,2),w=v[0],P=v[1],D=Object(O.useState)(""),S=f()(D,2),E=S[0],T=S[1],I=Object(O.useState)(""),k=f()(I,2),C=k[0],R=k[1],A=Object(se.p)(),_=function(e,t){switch(e){case Re.Email:var o=le(t);r(o),g(!!(t&&""!==t&&o&&E&&""!==E)&&b);case Re.Username:(function(e){return me("/users/check-username-availability?username="+e,!0)})(t).then((function(e){return a(e)}));break;case Re.Password:g(!(!t||!C||t!==C)&&n);break;case Re.ConfirmPassword:g(!(!t||!E||t!==E||""===w)&&n)}};return Object(V.jsxs)(Q,{style:{flex:1,alignItems:"center",justifyContent:"flex-start"},children:[Object(V.jsx)(Q,{children:Object(V.jsx)($,{children:"Let's get started"})}),Object(V.jsx)(Q,{children:Object(V.jsx)($,{children:"Sign up for free and get a lot of perks!"})}),Object(V.jsx)(ne,{onChangeText:function(e){P(e),_(Re.Username,e)},value:w,label:"Username",placeholder:"Enter your username",autoFocus:!0,border:!0}),Object(V.jsx)(ne,{onChangeText:function(e){l(e),_(Re.Email,e)},value:u,label:"E-mail",placeholder:"Enter your email",autoFocus:!0,border:!0}),Object(V.jsxs)(Q,{style:{display:"flex"},children:[Object(V.jsx)(ne,{onChangeText:function(e){T(e),""===e&&""===C&&j(!0),_(Re.Password,e)},value:E,label:"Password",placeholder:"Enter your password",keyboardType:"visible-password",border:!0,secureTextEntry:!0}),Object(V.jsx)(ne,{onChangeText:function(e){R(e),j(e===E),_(Re.ConfirmPassword,e)},value:C,label:"Confirm password",placeholder:"Confirm your password",border:!0,secureTextEntry:!0})]}),Object(V.jsx)(re,{onPress:function(){var e={username:w,password:E,email:u,callbackUrl:Oe+"/registration/email-confirmed",senderType:Ce.Warehouse};ge("/users/register",e,!0),A.navigate("PartnersListScreen")},style:{width:"100%"},disabled:!y,label:"Register"})]})},Me=n(17),We=function(e){var t,n,r,o,c=e.items,a=e.handleItemChosen,i=e.selectedItem,s=e.label,u=e.border,l=e.style,d=e.placeholder,p=Object(O.useState)(!1),b=f()(p,2),j=(b[0],b[1]),h=Object(O.useState)(null!=(t=null==i?void 0:i.title)?t:""),m=f()(h,2),y=m[0],g=m[1],x=Object(O.useState)(c),v=f()(x,2),w=v[0],P=v[1],D=Object(O.useRef)(new Me.a.Value(s?50:26.67)).current,S=Object(O.useRef)(new Me.a.Value(26.67)).current,E=Object(O.useRef)(new Me.a.Value(0)).current,T=function(e){Me.a.timing(D,{toValue:e?Math.min(250,50+26.67*w.length):s?50:26.67,duration:200,useNativeDriver:!1}).start(),Me.a.timing(S,{toValue:e?26.67:0,duration:e?400:200,useNativeDriver:!1}).start(),Me.a.timing(E,{toValue:e?200:0,duration:200,useNativeDriver:!1}).start(),j(e)};return Object(V.jsx)(Me.a.View,{style:{height:D,maxHeight:D,margin:null!=(n=null==l?void 0:l.margin)?n:0,marginBottom:null!=(r=null==l?void 0:l.marginBottom)?r:0,marginTop:null!=(o=null==l?void 0:l.marginTop)?o:0,width:U(300)},children:Object(V.jsxs)(Q,{style:{position:"relative",borderColor:"black",height:23,alignSelf:"stretch"},children:[Object(V.jsx)(ne,{label:s,onFocus:function(){T(!0)},onBlur:function(){setTimeout((function(){return T(!1)}),200)},value:y,placeholder:d,onChangeText:function(e){g(e),P(c.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())})))},style:{borderWidth:u?1:0}}),Object(V.jsx)(Me.a.View,{style:{maxHeight:E,position:"relative",width:U(300),maxWidth:500,justifyContent:"center",alignItems:"center",alignSelf:"center"},children:Object(V.jsx)(Me.a.View,{style:{maxHeight:E,overflow:"scroll",alignSelf:"stretch"},children:w.map((function(e){return Object(V.jsx)(Me.a.View,{style:{maxHeight:S},children:Object(V.jsx)(ue.a,{onPress:function(){!function(e){g(e.title),a(e.id),""===(null==i?void 0:i.id)&&g("")}(e)},style:{paddingLeft:12,height:25},children:Object(V.jsx)(k.a,{children:e.title})},e.id)},e.id)}))})})]})})};function qe(e){var t=e.title,n=e.children;return Object(V.jsxs)(ee,{style:Ue.container,children:[t&&Object(V.jsx)($,{style:Ue.title,children:t}),t&&Object(V.jsx)(te,{}),n]})}var Ue=n(8).a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),He=n(21),Ve=n.n(He);function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge=function(e){return{type:"ADD_ITEM",item:e}},Je=function(e){return{type:"EDIT_ITEM",item:e}},Ke=function(e){return{type:"LOAD_ITEMS",items:e}},Xe=function(e){return{type:"LOAD_ALL_ITEMS",items:e}},Ye=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ge,n.t1=Fe,n.t2=Fe({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/items/",n.t6).then((function(e){t(Ge(e))})).catch((function(e){console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},Ze=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/items?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){e(Ke(t))})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},$e=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/items/get-all?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){e(Xe(t))})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},Qe=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ye,n.t1=Fe,n.t2=Fe({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/items/",n.t6).then((function(n){n&&t(Je(e))})).catch((function(e){console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},et=function(e){return function(t){xe("api/items/",e).then((function(n){n&&t(function(e){return{type:"DELETE_ITEM",itemId:e}}(e))}))}},tt=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ge,n.t1=Fe,n.t2=Fe({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/items/buy-item",n.t6).then((function(e){t({type:"BUY_ITEM",buyItem:e})}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},nt=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ge,n.t1=e,n.next=4,p.a.awrap(Ee());case 4:n.t2=n.sent,n.t3={itemId:n.t1,accessToken:n.t2},(0,n.t0)("api/items/item-recovery",n.t3).then((function(e){t(Je(e))}));case 7:case"end":return n.stop()}}),null,null,null,Promise)}},rt=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},ot={items:[],showDeleted:!1},ct=function(e){return function(t){t(function(e){return{type:"CHANGE_TITLE",title:e}}(e))}},at={title:""};function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut={name:"",basePrice:"",sellPrice:"",partnerId:"",qtty:""},lt=Object(c.b)((function(e){return{items:e.items.items,partners:e.partners.partners}}),(function(e){return{onItemAdded:function(t){e(Ye(t))},onItemEdited:function(t){e(Qe(t))},onModalTitleChanged:function(t){e(ct(t))}}}))((function(e){var t,n,r=e.itemId,o=e.items,c=e.partners,a=e.onItemAdded,i=e.onModalTitleChanged,s=e.onItemEdited,l=o.find((function(e){return e.id===r})),d=Object(O.useState)(null!=l?l:ut),p=f()(d,2),b=p[0],j=p[1],h=Object(se.p)(),m=Object(O.useState)(c.map((function(e){return{id:e.id,title:e.name}}))),y=f()(m,1)[0];i(l?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430");var g=function(e,t){j(st(st({},b),{},u()({},e,t)))};return Object(V.jsxs)(qe,{children:[Object(V.jsx)(ne,{label:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:",onChangeText:function(e){return g("name",e)},value:b.name,border:!0}),Object(V.jsx)(We,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u0447\u0438\u043a",selectedItem:l?{id:l.partnerId,title:null!=(t=null==(n=c.find((function(e){return e.id===l.partnerId})))?void 0:n.name)?t:""}:void 0,items:y,handleItemChosen:function(e){j(st(st({},b),{},{partnerId:e}))},label:"\u0418\u043c\u0435 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u0447\u0438\u043a",border:!0,style:{marginBottom:15}}),!l&&Object(V.jsx)(ne,{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return g("basePrice",e)},value:b.basePrice.toString(),keyboardType:"numeric",border:!0}),!l&&Object(V.jsx)(ne,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:",onChangeText:function(e){return g("qtty",e)},value:b.qtty,keyboardType:"numeric",border:!0}),Object(V.jsx)(ne,{label:"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return g("sellPrice",e)},value:b.sellPrice.toString(),keyboardType:"numeric",border:!0}),Object(V.jsx)(re,{label:l?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",onPress:function(){l?s(b):a(b),j(ut),h.navigate("ItemsListScreen")}})]})})),ft=n(2),dt=n.n(ft),pt=n(3),bt=n.n(pt),jt=n(7),ht=n.n(jt),Ot=n(16),mt=n.n(Ot),yt=n(4),gt=n.n(yt),xt=n(343),vt=n(158),wt=n(261),Pt=function(e){var t=new Date(e);return Dt(t.getDate())+"."+Dt(t.getMonth()+1)+"."+t.getFullYear()+" "+Dt(t.getHours())+":"+Dt(t.getMinutes())},Dt=function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},St=function(e){return(Math.round(100*e)/100).toFixed(2)},Et=function(e){var t=Number(e);return(Math.round(100*t)/100).toFixed(2)},Tt=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,c=e.additionalActions,i=e.showDeleted,s=Object(O.useState)(""),u=f()(s,2),l=u[0],d=u[1],p=Object(O.useRef)(new Me.a.Value(300)).current,j=Object(a.b)(),h=function(e,t,n){return n.alert(t.title,t.content,[{text:t.cancelBtnTxt},{text:t.acceptBtnTxt,onPress:function(){return t.onAction(e)}}])};return Object(V.jsx)(V.Fragment,{children:n&&n.map((function(e){return(!i||i.showDeleted||!i.showDeleted&&!e.isDeleted)&&Object(V.jsx)(wt.a,{onSwipeLeft:function(){e.id!==l&&(p.setValue(300),d(e.id),Me.a.timing(p,{toValue:0,duration:200,useNativeDriver:!0}).start())},onSwipeRight:function(){Me.a.timing(p,{toValue:300,duration:200,useNativeDriver:!0}).start((function(){return d("")}))},children:Object(V.jsxs)(xt.a.Row,{style:{backgroundColor:e.isDeleted?"rgba(255, 0, 0, 0.05)":"white"},children:[t.map((function(t){var n;return Object(V.jsx)(xt.a.Cell,{style:{flex:null!=(n=t.flex)?n:1},children:t.isMoney?St(Number(e[t.propName])):e[t.propName]},t.name)})),l==e.id&&(o||r||c||i&&e.isDeleted)&&Object(V.jsxs)(Me.a.View,{style:{alignSelf:"center",flexDirection:"row",transform:[{translateX:p}]},children:[c&&c.map((function(t){return Object(V.jsx)(b.a,{name:t.name,size:30,color:t.color,style:{alignSelf:"center",marginRight:10},onPress:function(){t.onPress(e),d("")}})})),o&&Object(V.jsx)(b.a,{name:"edit",size:30,color:"green",style:{alignSelf:"center",marginRight:10},onPress:function(){o(e.id),d("")}}),r&&!e.isDeleted&&Object(V.jsx)(b.a,{name:"remove",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return h(e.id,r,j)}}),i&&e.isDeleted&&Object(V.jsx)(b.a,{name:"arrow-down",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return h(e.id,i.recoverProps,j)}})]},e.id)]})},e.id)}))})},It=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,c=e.additionalActions,i=e.showDeleted,s=Object(a.b)(),u=function(e,t,n){return n.alert(t.title,t.content,[{text:t.cancelBtnTxt},{text:t.acceptBtnTxt,onPress:function(){return t.onAction(e)}}])};return Object(V.jsx)(V.Fragment,{children:n&&n.map((function(e){return(!i||i.showDeleted||!i.showDeleted&&!e.isDeleted)&&Object(V.jsxs)(xt.a.Row,{style:{backgroundColor:e.isDeleted?"rgba(255, 0, 0, 0.05)":"white"},children:[t.map((function(t){var n;return Object(V.jsx)(xt.a.Cell,{style:{flex:null!=(n=t.flex)?n:1},children:t.isMoney?St(Number(e[t.propName])):e[t.propName]},t.name)})),(o||r||c||i&&e.isDeleted)&&Object(V.jsxs)(Me.a.View,{style:{alignSelf:"center",flexDirection:"row"},children:[c&&c.map((function(t){return Object(V.jsx)(b.a,{name:t.name,size:30,color:t.color,style:{alignSelf:"center",marginRight:10},onPress:function(){return t.onPress(e)}})})),o&&Object(V.jsx)(b.a,{name:"edit",size:30,color:"green",style:{alignSelf:"center",marginRight:10},onPress:function(){return o(e.id)}}),r&&!e.isDeleted&&Object(V.jsx)(b.a,{name:"remove",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return u(e.id,r,s)}}),i&&e.isDeleted&&Object(V.jsx)(b.a,{name:"arrow-down",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return u(e.id,i.recoverProps,s)}})]},e.id)]},e.id)}))})},kt=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,c=e.additionalActions,a=e.showDeleted;return Object(V.jsxs)(xt.a,{style:{width:U(300)},children:[function(e){var t=e.columns;return Object(V.jsx)(xt.a.Header,{children:Object(V.jsxs)(V.Fragment,{children:[t&&t.map((function(e){var t;return Object(V.jsx)(xt.a.Title,{style:{flex:null!=(t=e.flex)?t:1},children:e.name},e.name)})),a&&Object(V.jsx)(vt.a,{trackColor:{false:"#767577",true:"#81b0ff"},thumbColor:a.showDeleted?"#f5dd4b":"#f4f3f4",ios_backgroundColor:"#3e3e3e",onValueChange:a.setShowDeleted,style:{alignSelf:"flex-end",marginBottom:14},value:a.showDeleted})]})})}({columns:t}),H?Object(V.jsx)(Tt,{columns:t,data:n,deleteProps:r,onEdit:o,additionalActions:c,showDeleted:a}):Object(V.jsx)(It,{columns:t,data:n,deleteProps:r,onEdit:o,additionalActions:c,showDeleted:a})]})};function Ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gt()(e);if(t){var o=gt()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mt()(this,n)}}var Rt=function(e){ht()(n,e);var t=Ct(n);function n(){return dt()(this,n),t.apply(this,arguments)}return bt()(n)}(m.a.Component);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lt=Object(c.b)(null,(function(e){return{onModalTitleChanged:function(t){e(ct(t))},onBuyItem:function(t){e(tt(t))}}}))((function(e){var t=e.item,n=e.onModalTitleChanged,r=e.onBuyItem,o=Object(O.useState)(_t(_t({},t),{},{qtty:"1"})),c=f()(o,2),a=c[0],i=c[1],s=function(e,t){i(_t(_t({},a),{},u()({},e,t)))},l=Object(se.p)();return Object(O.useEffect)((function(){return n("\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430")})),Object(V.jsxs)(qe,{children:[Object(V.jsx)(ne,{label:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:",value:a.name,border:!0}),Object(V.jsx)(ne,{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return s("basePrice",e)},value:a.basePrice,keyboardType:"numeric",border:!0}),Object(V.jsx)(ne,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:",onChangeText:function(e){return s("qtty",e)},value:a.qtty,keyboardType:"numeric",border:!0}),Object(V.jsx)(ne,{label:"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430:",value:a.sellPrice,keyboardType:"numeric",border:!0}),Object(V.jsxs)($,{style:{margin:0},children:["\u0421\u0443\u043c\u0430 \u0437\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0430:"," ",St(Number(a.qtty)*Number(a.basePrice))]}),Object(V.jsx)(re,{label:"\u0417\u0430\u0432\u044a\u0440\u0448\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0430",onPress:function(){r({qtty:a.qtty,basePrice:a.basePrice,itemId:a.id}),l.goBack()}})]})}));function Nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gt()(e);if(t){var o=gt()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mt()(this,n)}}var Bt=function(e){ht()(n,e);var t=Nt(n);function n(){var e;dt()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(et(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(V.jsx)(lt,{itemId:t})})},e}return bt()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.listableItems,r=t.columns,o=t.showDeleted,c=[{name:"plus",color:"green",onPress:function(t){e.props.navigation.navigate("Modal",{component:Object(V.jsx)(Lt,{item:t})})}}];return Object(V.jsx)(kt,{data:n,columns:r,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u0441\u0442\u043e\u043a\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,additionalActions:c,showDeleted:o})}}]),n}(Rt),Mt=Object(c.b)((function(e){return{items:e.items.items}}))(Bt),Wt=Object(c.b)((function(e){return{items:e.items.items,showDeleted:e.items.showDeleted}}),(function(e){return{onItemsLoaded:function(){e(Ze())},onItemRecovery:function(t){e(nt(t))},onAllItemsLoaded:function(){e($e())},onShowDeletedChanged:function(t){e(rt(t))}}}))((function(e){var t=e.items,n=e.onItemsLoaded,r=e.onAllItemsLoaded,o=e.onItemRecovery,c=e.showDeleted,a=e.onShowDeletedChanged,i=Object(se.p)();Object(O.useEffect)((function(){c?r():n()}),[c]);var s=[{name:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",propName:"name",flex:6},{name:H?"\u0414-\u043d\u0430 \u0446\u0435\u043d\u0430":"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430",propName:"basePrice",flex:H?2:1,isRight:!0,isMoney:!0},{name:H?"\u041f-\u043d\u0430 \u0446\u0435\u043d\u0430":"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430",propName:"sellPrice",flex:H?2:1,isRight:!0,isMoney:!0},{name:"\u041a-\u0432\u043e",propName:"qtty",flex:1,isRight:!0,isMoney:!0}];return Object(V.jsx)(qe,{children:Object(V.jsx)(Mt,{columns:s,listableItems:t,navigation:i,showDeleted:{showDeleted:c,setShowDeleted:a,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u0441\u0442\u043e\u043a\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:o}}})})}));function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht=function(e){return{type:"ADD_PARTNER",partner:e}},Vt=function(e){return{type:"EDIT_PARTNER",partner:e}},zt=function(e){return{type:"LOAD_PARTNERS",partners:e}},Ft=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ge,n.t1=Ut,n.t2=Ut({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/partners/",n.t6).then((function(e){t(Ht(e))})).catch((function(e){return console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},Gt=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/partners/get-all?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){e(zt(t))})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},Jt=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ye,n.t1=Ut,n.t2=Ut({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/partners/",n.t6).then((function(n){return n&&t(Vt(e))}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},Kt=function(e){return function(t){xe("api/partners/",e).then((function(n){return n&&t(function(e){return{type:"DELETE_PARTNER",partnerId:e}}(e))}))}},Xt=function(e){return function(t){ge("api/partners/partner-recovery",e).then((function(e){t(Vt(e))}))}},Yt=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},Zt={partners:[],showDeleted:!1};function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en={id:"",address:"",name:"",vatNumber:""},tn=Object(c.b)((function(e){return e.partners}),(function(e){return{onPartnerAdded:function(t){e(Ft(t))},onPartnerEdited:function(t){e(Jt(t))},onModalTitleChanged:function(t){e(ct(t))}}}))((function(e){var t=e.onPartnerAdded,n=e.partners,r=e.onModalTitleChanged,o=e.onPartnerEdited,c=e.partnerId,a=n&&n.find((function(e){return e.id===c})),i=Object(O.useState)(null!=a?a:en),s=f()(i,2),l=s[0],d=s[1],p=Object(se.p)();r(a?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440");var b=function(e,t){d(Qt(Qt({},l),{},u()({},e,t)))};return Object(V.jsxs)(qe,{children:[Object(V.jsx)(ne,{label:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430:",onChangeText:function(e){return b("name",e)},value:l.name,border:!0}),Object(V.jsx)(ne,{label:"\u0414\u0414\u0421 \u041d\u043e\u043c\u0435\u0440:",onChangeText:function(e){return b("vatNumber",e)},value:l.vatNumber,border:!0}),Object(V.jsx)(ne,{label:"\u0410\u0434\u0440\u0435\u0441:",onChangeText:function(e){return b("address",e)},value:l.address,border:!0}),Object(V.jsx)(re,{label:a?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435",onPress:function(){a?o(l):t(l),d(en),p.navigate("PartnersListScreen")}})]})}));function nn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gt()(e);if(t){var o=gt()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mt()(this,n)}}var rn=function(e){ht()(n,e);var t=nn(n);function n(){var e;dt()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(Kt(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(V.jsx)(tn,{partnerId:t})})},e}return bt()(n,[{key:"render",value:function(){var e=this.props,t=e.listableItems,n=e.columns,r=e.showDeleted;return Object(V.jsx)(kt,{data:t,columns:n,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u044f\u0442 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,showDeleted:r})}}]),n}(Rt),on=Object(c.b)((function(e){return{partners:e.partners.partners}}))(rn),cn=Object(c.b)((function(e){return{partners:e.partners.partners,showDeleted:e.partners.showDeleted}}),(function(e){return{onPartnersLoaded:function(){e(Gt())},onPartnerRecovery:function(t){e(Xt(t))},setShowDeleted:function(t){e(Yt(t))}}}))((function(e){var t=e.onPartnersLoaded,n=e.partners,r=e.onPartnerRecovery,o=e.setShowDeleted,c=e.showDeleted;Object(O.useEffect)((function(){return t()}),[c]);return Object(V.jsx)(qe,{children:Object(V.jsx)(on,{columns:[{name:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",propName:"name",flex:4},{name:"\u0414\u0414\u0421 \u041d\u043e\u043c\u0435\u0440",propName:"vatNumber",flex:1,isRight:!0},{name:"\u0410\u0434\u0440\u0435\u0441",propName:"address",flex:2,isRight:!0}],listableItems:n,navigation:Object(se.p)(),showDeleted:{setShowDeleted:o,showDeleted:c,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u044f \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:r}}})})}));function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un=function(e){return{type:"ADD_SALE",sale:e}},ln=function(e){return{type:"EDIT_SALE",sale:e}},fn=function(e){return{type:"LOAD_SALES",sales:e}},dn=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ge,n.t1=sn,n.t2=sn({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/sales/",n.t6).then((function(e){t(un(e))})).catch((function(e){console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},pn=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/sales?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){e(fn(t))})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},bn=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/sales/get-all?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){e(fn(t))})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},jn=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ye,n.t1=sn,n.t2=sn({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/sales/",n.t6).then((function(n){n&&t(ln(e))})).catch((function(e){console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},hn=function(e){return function(t){xe("api/sales/",e).then((function(n){n&&t(function(e){return{type:"DELETE_SALE",saleId:e}}(e))}))}},On=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ge,n.t1=e,n.next=4,p.a.awrap(Ee());case 4:n.t2=n.sent,n.t3={saleId:n.t1,accessToken:n.t2},(0,n.t0)("api/sales/sale-recovery",n.t3).then((function(e){t(ln(e))}));case 7:case"end":return n.stop()}}),null,null,null,Promise)}},mn=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},yn={sales:[],showDeleted:!1},gn=function(){return(Math.random()+1).toString(36).substring(7)};function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn=function(e){var t,n=e.items,r=e.saleItems,o=e.setSelectedItems,c=(e.sale,Object(O.useState)({id:"",title:""})),a=f()(c,2),i=a[0],s=a[1],u=Object(O.useState)(n.map((function(e){return{id:e.id,title:e.name}}))),l=f()(u,1)[0];return Object(V.jsxs)(Q,{style:{width:U(300),height:W()-250},children:[Object(V.jsxs)(Q,{style:{display:"flex",flexDirection:"row",borderBottomWidth:2,borderBottomColor:"grey",backgroundColor:"none"},children:[Object(V.jsx)(Q,{style:{flexDirection:"row",flex:5,justifyContent:"flex-start"},children:Object(V.jsx)($,{style:{margin:0},children:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:"})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"center"},children:Object(V.jsx)($,{children:H?"\u041a-\u0432\u043e":"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(V.jsx)($,{children:H?"\u0426\u0435\u043d\u0430":"\u0426\u0435\u043d\u0430:"})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(V.jsx)($,{children:H?"\u041e\u0431\u0449\u043e":"\u041e\u0431\u0449\u043e \u0441\u0443\u043c\u0430:"})})]}),r&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(Q,{style:{height:H?W()-400:W()-290,overflow:"scroll"},children:[r.map((function(e){var t,c=Number(e.qtty)<=Number(null==(t=n.find((function(t){return t.id===e.itemId})))?void 0:t.qtty);return Object(V.jsxs)(Q,{style:{display:"flex",flexDirection:"row",borderBottomWidth:1,borderBottomColor:"grey"},children:[Object(V.jsx)(Q,{style:{flexDirection:"row",flex:5,alignSelf:"stretch"},children:Object(V.jsx)(We,{selectedItem:{id:e.itemId,title:e.name},placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",items:l,handleItemChosen:function(t){setTimeout((function(){var c=n.find((function(e){return e.id===t}));o(r.map((function(t){return e.uniqueId===t.uniqueId?{id:"",uniqueId:gn(),itemId:c.id,name:c.name,qtty:"1",price:c.sellPrice,total:St(Number(c.sellPrice))}:t})))}),300)}},e.itemId)}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,alignSelf:"stretch"},children:Object(V.jsx)(ne,{autoFocus:!0,keyboardType:"numeric",style:{textAlign:"center",borderWidth:c?0:1,borderColor:c?"white":"red",alignSelf:"stretch",width:"100%"},value:e.qtty.toString(),onChangeText:function(t){return o(r.map((function(n){return e.uniqueId===n.uniqueId?vn(vn({},n),{},{qtty:t,total:St(Number(t)*Number(n.price))}):n})))}})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,alignSelf:"stretch"},children:Object(V.jsx)(ne,{style:{textAlign:"center",borderWidth:0,alignSelf:"stretch",width:"100%"},keyboardType:"numeric",value:e.price.toString(),onChangeText:function(t){return o(r.map((function(n){return e.uniqueId===n.uniqueId?vn(vn({},n),{},{price:t,total:St(Number(n.qtty)*Number(t))}):n})))}})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,alignSelf:"stretch",width:"100%"},children:Object(V.jsx)($,{children:Et(e.total)})})]},e.itemId)})),Object(V.jsxs)(Q,{style:{display:"flex",flexDirection:"row",borderBottomWidth:1,borderBottomColor:"grey"},children:[Object(V.jsx)(Q,{style:{flexDirection:"row",flex:5},children:Object(V.jsx)(We,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",selectedItem:i,items:l,handleItemChosen:function(e){var t=n.find((function(t){return t.id===e}));o([].concat(Ve()(r),[{id:"",uniqueId:gn(),itemId:t.id,name:t.name,qtty:"1",price:t.sellPrice,total:St(Number(t.sellPrice))}])),s({id:"",title:""})}})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"center"},children:Object(V.jsx)($,{})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(V.jsx)($,{})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(V.jsx)($,{})})]})]}),Object(V.jsxs)(Q,{style:{display:"flex",flexDirection:"row",borderBottomWidth:2,borderBottomColor:"grey",backgroundColor:"none",height:30},children:[Object(V.jsx)(Q,{style:{flexDirection:"row",flex:6,justifyContent:"flex-end"},children:Object(V.jsx)($,{style:{margin:0},children:"\u041e\u0431\u0449\u043e \u0441\u0443\u043c\u0430:"})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end",paddingBottom:7},children:Object(V.jsx)($,{children:St(r.length>0?null==r||null==(t=r.map((function(e){return Number(e.total)})))?void 0:t.reduce((function(e,t){return e+t})):0)})})]})]})]})};function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sn={id:"",date:new Date,isDeleted:!1,description:"",saleItems:[],partnerId:"",totalAmount:0},En=Object(c.b)((function(e){return{sales:e.sales.sales,partners:e.partners.partners,items:e.items.items}}),(function(e){return{onSaleAdded:function(t){e(dn(t))},onSaleEdited:function(t){e(jn(t))},onModalTitleChanged:function(t){e(ct(t))}}}))((function(e){var t,n,r=e.saleId,o=e.sales,c=e.onSaleAdded,a=e.onModalTitleChanged,i=e.onSaleEdited,s=e.partners,u=e.items,l=o.find((function(e){return e.id===r})),d=Object(O.useState)(null!=l?l:Sn),p=f()(d,2),b=p[0],j=p[1],h=Object(O.useState)(s.map((function(e){return{id:e.id,title:e.name}}))),m=f()(h,1)[0],y=Object(se.p)();a(l?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430");var g=Object(O.useState)(l?l.saleItems.map((function(e){return{uniqueId:gn(),itemId:e.itemId,name:e.name,qtty:e.qtty,total:e.total,price:e.price,id:e.id}})):[]),x=f()(g,2),v=x[0],w=x[1];return Object(V.jsx)(qe,{children:Object(V.jsxs)(Q,{style:{height:W()},children:[Object(V.jsx)(We,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",selectedItem:l?{id:l.partnerId,title:null!=(t=null==(n=s.find((function(e){return e.id===l.partnerId})))?void 0:n.name)?t:""}:void 0,items:m,handleItemChosen:function(e){j(Dn(Dn({},b),{},{partnerId:e}))},label:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",border:!0,style:{marginBottom:15}}),Object(V.jsx)(wn,{items:u,saleItems:v,setSelectedItems:w,sale:b}),Object(V.jsx)(re,{disabled:void 0===v||0===v.length||""===b.partnerId,label:l?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",onPress:function(){b.totalAmount=v.map((function(e){return Number(e.total)})).reduce((function(e,t){return e+t})),b.saleItems=v,l?i(b):c(b),j(Sn),y.navigate("SalesListScreen")},style:{alignSelf:"center"}})]})})}));function Tn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gt()(e);if(t){var o=gt()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mt()(this,n)}}var In=function(e){ht()(n,e);var t=Tn(n);function n(){var e;dt()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(hn(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(V.jsx)(En,{saleId:t})})},e}return bt()(n,[{key:"render",value:function(){var e=this.props,t=e.listableItems,n=e.columns,r=e.showDeleted;return Object(V.jsx)(kt,{data:t,columns:n,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,showDeleted:r})}}]),n}(Rt),kn=Object(c.b)((function(e){return{sales:e.sales.sales}}))(In),Cn=Object(c.b)((function(e){var t,n;return{sales:(null==(t=e.sales)?void 0:t.sales)||[],partners:(null==(n=e.partners)?void 0:n.partners)||[],showDeleted:e.sales.showDeleted}}),(function(e){return{onSalesLoaded:function(){e(pn())},onSaleRecovery:function(t){e(On(t))},onAllSalesLoaded:function(){e(bn())},onPartnersLoaded:function(){e(Gt())},onItemsLoaded:function(){e($e())},setShowDeleted:function(t){e(mn(t))}}}))((function(e){var t=e.sales,n=e.partners,r=e.onSalesLoaded,o=e.onSaleRecovery,c=e.onItemsLoaded,a=e.onPartnersLoaded,i=e.onAllSalesLoaded,s=e.showDeleted,u=e.setShowDeleted,l=Object(se.p)();Object(O.useEffect)((function(){s?i():r(),c(),a()}),[s]);var f=[{name:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",propName:"partner",flex:6},{name:"\u0414\u0430\u0442\u0430",propName:"date",flex:H?3:2},{name:"\u041e\u0431\u0449\u0430 \u0441\u0443\u043c\u0430",propName:"total",flex:H?2:1,isRight:!0}];return Object(V.jsx)(qe,{children:Object(V.jsx)(kn,{columns:f,listableItems:t.map((function(e){var t,r;return{id:e.id,partner:null!=(t=null==(r=n.find((function(t){return t.id===e.partnerId})))?void 0:r.name)?t:"",date:Pt(e.date),description:e.description,total:St(e.totalAmount),isDeleted:e.isDeleted}})),navigation:l,showDeleted:{setShowDeleted:u,showDeleted:s,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:o}}})})})),Rn=Object(c.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,n=Object(ie.a)(),r=Object(se.p)(),o=Object(O.useState)(!1),c=f()(o,2),a=c[0],i=c[1];return Object(O.useEffect)((function(){i(void 0!==t.username&&""!==t.username||void 0!==t.email&&""!==t.email)})),Object(V.jsx)(n.Navigator,{children:Object(V.jsx)(n.Group,{children:a?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(n.Screen,{name:"SalesListScreen",component:Cn,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0438",headerTitleAlign:"center",headerRight:function(){return Object(V.jsx)(ue.a,{onPress:function(e){e.preventDefault(),r.navigate("Modal",{component:Object(V.jsx)(En,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(V.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})})}}}),Object(V.jsx)(n.Screen,{name:"ItemsListScreen",navigationKey:"/ItemsListScreen",component:Wt,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441\u044a\u0441 \u0441\u0442\u043e\u043a\u0438",headerTitleAlign:"center",headerRight:function(){return Object(V.jsx)(ue.a,{onPress:function(e){e.preventDefault(),r.navigate("Modal",{component:Object(V.jsx)(lt,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(V.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})})}}}),Object(V.jsx)(n.Screen,{name:"PartnersListScreen",navigationKey:"PartnersListScreen",component:cn,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0438",headerTitleAlign:"center",headerRight:function(){return Object(V.jsx)(ue.a,{onPress:function(e){e.preventDefault(),r.navigate("Modal",{component:Object(V.jsx)(tn,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(V.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})})}}})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(n.Screen,{name:"Login",component:Ne}),Object(V.jsx)(n.Screen,{name:"Register",component:Be})]})})})})),An=Object(c.b)((function(e){return e.title}),(function(e){return{onInitUser:function(t){e(_e(t))}}}))((function(e){var t=e.colorScheme,n=e.title,r=e.onInitUser;return O.useEffect((function(){!function(){var e;p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(Pe());case 2:e=t.sent,r(e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}),[]),Object(V.jsx)(w.a,{linking:ae,theme:"dark"===t?P.a:D.a,children:Object(V.jsx)(Ln,{title:n})})})),_n=Object(S.a)();function Ln(e){var t=e.title;return Object(V.jsxs)(_n.Navigator,{children:[Object(V.jsx)(_n.Screen,{name:"Warehouse",component:Rn,options:{headerShown:!1}}),Object(V.jsx)(_n.Group,{screenOptions:{presentation:"modal"},children:Object(V.jsx)(_n.Screen,{name:"Modal",component:ce,options:{title:t,headerTitleAlign:"center"}})})]})}var Nn=n(141),Bn=n(258),Mn={items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_ITEM":return Fe(Fe({},e),{},{items:[].concat(Ve()(e.items),[n.item])});case"LOAD_ITEMS":case"LOAD_ALL_ITEMS":return Fe(Fe({},e),{},{items:n.items});case"EDIT_ITEM":return Fe(Fe({},e),{},{items:Ve()(e.items.map((function(e){return e.id===n.item.id?Fe({},n.item):e})))});case"DELETE_ITEM":return Fe(Fe({},e),{},{items:e.showDeleted?Ve()(e.items.map((function(e){return e.id===n.itemId?Fe(Fe({},e),{},{isDeleted:!0}):e}))):Ve()(e.items.filter((function(e){return e.id!==n.itemId})))});case"BUY_ITEM":return Fe(Fe({},e),{},{items:Ve()(e.items.map((function(e){return e.id===n.buyItem.itemId?Fe(Fe({},e),{},{qtty:(Number(e.qtty)+Number(n.buyItem.qtty)).toString(),basePrice:n.buyItem.basePrice}):e})))});case"SET_SHOW_DELETED":return Fe(Fe({},e),{},{showDeleted:n.showDeleted});default:return e}},title:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"CHANGE_TITLE":return{title:n.title};default:return e}},partners:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_PARTNER":return Ut(Ut({},e),{},{partners:[].concat(Ve()(e.partners),[n.partner])});case"LOAD_PARTNERS":return Ut(Ut({},e),{},{partners:n.partners});case"EDIT_PARTNER":return Ut(Ut({},e),{},{partners:Ve()(e.partners.map((function(e){return e.id===n.partner.id?Ut({},n.partner):e})))});case"DELETE_PARTNER":return Ut(Ut({},e),{},{partners:Ve()(e.partners.map((function(e){return e.id===n.partnerId?Ut(Ut({},e),{},{isDeleted:!0}):e})))});case"SET_SHOW_DELETED":return Ut(Ut({},e),{},{showDeleted:n.showDeleted});default:return e}},sales:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_SALE":return sn(sn({},e),{},{sales:[].concat(Ve()(e.sales),[n.sale])});case"LOAD_SALES":case"LOAD_ALL_SALES":return sn(sn({},e),{},{sales:n.sales});case"EDIT_SALE":return sn(sn({},e),{},{sales:Ve()(e.sales.map((function(e){return e.id===n.sale.id?sn({},n.sale):e})))});case"DELETE_SALE":return sn(sn({},e),{},{sales:e.showDeleted?Ve()(e.sales.map((function(e){return e.id===n.saleId?sn(sn({},e),{},{isDeleted:!0}):e}))):Ve()(e.sales.filter((function(e){return e.id!==n.saleId})))});case"SET_SHOW_DELETED":return sn(sn({},e),{},{showDeleted:n.showDeleted});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"LOGIN_USER":case"INIT_USER":return ke({},n.user);default:return e}}};function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){var t=[Bn.a],n=Object(Nn.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Mn)),r=[],o="undefined"===typeof window?null:window;return o&&o.__REDUX_DEVTOOLS_EXTENSION__&&r.push(o.__REDUX_DEVTOOLS_EXTENSION__()),Object(Nn.d)(n,e,Nn.c.apply(void 0,[Nn.a.apply(void 0,t)].concat(r)))}!function(){if("web"===E.a.OS){var e=document.createElement("style");e.textContent="textarea, select, input, button { outline: none !important; }",e.textContent+="div::-webkit-scrollbar { width: 0; }",document.head.append(e)}}();t.a=function(){var e=function(){var e=Object(O.useState)(!1),t=f()(e,2),r=t[0],o=t[1];return Object(O.useEffect)((function(){p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h.b(),e.next=4,p.a.awrap(j.b(g(g({},b.a.font),{},{"space-mono":n(298)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),h.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=v(),s=qn();return e?Object(V.jsxs)(o.b,{children:[Object(V.jsx)(c.a,{store:s,children:Object(V.jsx)(i.a,{children:Object(V.jsx)(a.a,{children:Object(V.jsx)(An,{colorScheme:t,title:s.getState().title.title})})})}),Object(V.jsx)(r.a,{})]}):null}},268:function(e,t,n){e.exports=n(328)},298:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},308:function(e,t){}},[[268,1,2]]]);
//# sourceMappingURL=app.ccb61f3c.chunk.js.map