(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{299:function(e,t,n){"use strict";n.d(t,"a",(function(){return fn}));var r=n(178),o=n(378),i=n(48),c=n(124),a=n(392),s=n(5),l=n.n(s),u=n(10),d=n.n(u),f=n(17),p=n.n(f),b=n(385),j=n(390),h=n(202),O=n(0),m=n.n(O);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=n(279);function v(){return Object(x.a)()}var w=n(386),D=n(387),P=n(171),S=n(391),E=n(76),I=n(12),T=n(16),C=n.n(T),R=n(56),A=n(11),L=n(84),k=n(280),N={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc",borderColor:"rgb(0, 255, 0)"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff",borderColor:"rgb(0, 255, 0)"}},_=n(40),B=n(109),M=_.a.get("window"),q=M.width,W=(M.height,function(){return _.a.get("window").height}),V=q/320;function z(e){var t=e*V;return"ios"===I.a.OS?Math.round(B.a.roundToNearestPixel(t)):Math.round(B.a.roundToNearestPixel(t))-2}var H="android"===I.a.OS||"ios"===I.a.OS,F=(I.a.OS,I.a.OS,n(7)),U=["style","lightColor","darkColor"],G=["style","lightColor","darkColor"],J=["style","lightColor","darkColor"],X=["style","lightColor","darkColor","border"],Y=["style","lightColor","darkColor","onPress","label"];function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t){var n=v(),r=e[n];return r||N[n][t]}function $(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=C()(e,U),i=Z({light:n,dark:r},"text");return Object(F.jsx)(R.a,Q({style:[{color:i,margin:"auto"},t]},o))}function ee(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=C()(e,G),i=Z({light:n,dark:r},"background");return Object(F.jsx)(A.a,Q({style:[{backgroundColor:i},t]},o))}function te(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=C()(e,J),i=Z({light:n,dark:r},"background");return Object(F.jsx)(A.a,Q({style:[{backgroundColor:i,paddingTop:z(8)},t]},o))}function ne(){return Object(F.jsx)(ee,{style:{marginVertical:z(10),height:1,width:z(300)},lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"})}function re(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=e.border,i=C()(e,X),c=Z({light:n,dark:r},"text"),a=e.label;return a?Object(F.jsx)(ee,{style:[{width:z(300),marginBottom:10,justifyContent:"center",alignItems:"center",borderWidth:0}],children:Object(F.jsxs)(ee,{style:{borderWidth:0},children:[Object(F.jsx)($,{style:{marginLeft:1,marginBottom:2},children:a}),Object(F.jsx)(L.a,Q({style:[{color:c,borderColor:c,width:z(300),maxWidth:500,borderRadius:5,padding:3,paddingBottom:5,paddingLeft:5,borderWidth:o?1:0},t]},i))]})}):Object(F.jsx)(L.a,Q({style:[{color:c,borderColor:c,borderWidth:0,width:z(300),maxWidth:500,borderRadius:5,padding:3,paddingBottom:5,paddingLeft:5},t]},i))}function oe(e){var t=e.style,n=(e.lightColor,e.darkColor,e.onPress),r=e.label,o=C()(e,Y);return Object(F.jsx)(k.a,Q(Q({style:[{backgroundColor:o.disabled?"rgba(35, 134, 38, 0.45)":"rgba(35, 134, 38, 0.9)",borderWidth:1,padding:5,borderRadius:5,width:z(300),maxWidth:500,alignItems:"center",marginTop:z(5),borderColor:"rgba(240,246,252,0.1)",zIndex:1},t],onPress:n},o),{},{children:Object(F.jsx)($,{style:{color:"white"},children:r})}))}var ie=function(e){var t=e.route.params.component;return Object(F.jsxs)(ee,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[t,Object(F.jsx)(r.a,{style:"ios"===I.a.OS?"light":"auto"})]})},ce=n(43);function ae(e){var t=e.title,n=e.children;return Object(F.jsxs)(te,{style:se.container,children:[t&&Object(F.jsx)($,{style:se.title,children:t}),t&&Object(F.jsx)(ne,{}),n]})}var se=n(8).a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),le=n(3),ue=n.n(le),de=n(4),fe=n.n(de),pe=n(6),be=n.n(pe),je=n(13),he=n.n(je),Oe=n(2),me=n.n(Oe),ye=n(389),ge=n(169),xe=n(15),ve=n(302),we=function(e){var t=new Date(e);return De(t.getDate())+"."+De(t.getMonth()+1)+"."+t.getFullYear()+" "+De(t.getHours())+":"+De(t.getMinutes())},De=function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},Pe=function(e){return(Math.round(100*e)/100).toFixed(2)},Se=function(e){var t=Number(e);return(Math.round(100*t)/100).toFixed(2)},Ee=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,i=e.additionalActions,a=e.showDeleted,s=Object(O.useState)(""),l=d()(s,2),u=l[0],f=l[1],p=Object(O.useRef)(new xe.a.Value(300)).current,j=Object(c.b)(),h=function(e,t,n){return n.alert(t.title,t.content,[{text:t.cancelBtnTxt},{text:t.acceptBtnTxt,onPress:function(){return t.onAction(e)}}])};return Object(F.jsx)(F.Fragment,{children:n&&n.map((function(e){return(!a||a.showDeleted||!a.showDeleted&&!e.isDeleted)&&Object(F.jsx)(ve.a,{onSwipeLeft:function(){e.id!==u&&(p.setValue(300),f(e.id),xe.a.timing(p,{toValue:0,duration:200,useNativeDriver:!0}).start())},onSwipeRight:function(){xe.a.timing(p,{toValue:300,duration:200,useNativeDriver:!0}).start((function(){return f("")}))},children:Object(F.jsxs)(ye.a.Row,{style:{backgroundColor:e.isDeleted?"rgba(255, 0, 0, 0.05)":"white"},children:[t.map((function(t){var n;return Object(F.jsx)(ye.a.Cell,{style:{flex:null!=(n=t.flex)?n:1},children:t.isMoney?Pe(Number(e[t.propName])):e[t.propName]},t.name)})),u==e.id&&(o||r||i||a&&e.isDeleted)&&Object(F.jsxs)(xe.a.View,{style:{alignSelf:"center",flexDirection:"row",transform:[{translateX:p}]},children:[i&&i.map((function(t){return Object(F.jsx)(b.a,{name:t.name,size:30,color:t.color,style:{alignSelf:"center",marginRight:10},onPress:function(){t.onPress(e),f("")}})})),o&&Object(F.jsx)(b.a,{name:"edit",size:30,color:"green",style:{alignSelf:"center",marginRight:10},onPress:function(){o(e.id),f("")}}),r&&!e.isDeleted&&Object(F.jsx)(b.a,{name:"remove",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return h(e.id,r,j)}}),a&&e.isDeleted&&Object(F.jsx)(b.a,{name:"arrow-down",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return h(e.id,a.recoverProps,j)}})]},e.id)]})},e.id)}))})},Ie=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,i=e.additionalActions,a=e.showDeleted,s=Object(c.b)(),l=function(e,t,n){return n.alert(t.title,t.content,[{text:t.cancelBtnTxt},{text:t.acceptBtnTxt,onPress:function(){return t.onAction(e)}}])};return Object(F.jsx)(F.Fragment,{children:n&&n.map((function(e){return(!a||a.showDeleted||!a.showDeleted&&!e.isDeleted)&&Object(F.jsxs)(ye.a.Row,{style:{backgroundColor:e.isDeleted?"rgba(255, 0, 0, 0.05)":"white"},children:[t.map((function(t){var n;return Object(F.jsx)(ye.a.Cell,{style:{flex:null!=(n=t.flex)?n:1},children:t.isMoney?Pe(Number(e[t.propName])):e[t.propName]},t.name)})),(o||r||i||a&&e.isDeleted)&&Object(F.jsxs)(xe.a.View,{style:{alignSelf:"center",flexDirection:"row"},children:[i&&i.map((function(t){return Object(F.jsx)(b.a,{name:t.name,size:30,color:t.color,style:{alignSelf:"center",marginRight:10},onPress:function(){return t.onPress(e)}})})),o&&Object(F.jsx)(b.a,{name:"edit",size:30,color:"green",style:{alignSelf:"center",marginRight:10},onPress:function(){return o(e.id)}}),r&&!e.isDeleted&&Object(F.jsx)(b.a,{name:"remove",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return l(e.id,r,s)}}),a&&e.isDeleted&&Object(F.jsx)(b.a,{name:"arrow-down",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return l(e.id,a.recoverProps,s)}})]},e.id)]},e.id)}))})},Te=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,i=e.additionalActions,c=e.showDeleted;return Object(F.jsxs)(ye.a,{style:{width:z(300)},children:[function(e){var t=e.columns;return Object(F.jsx)(ye.a.Header,{children:Object(F.jsxs)(F.Fragment,{children:[t&&t.map((function(e){var t;return Object(F.jsx)(ye.a.Title,{style:{flex:null!=(t=e.flex)?t:1},children:e.name},e.name)})),c&&Object(F.jsx)(ge.a,{trackColor:{false:"#767577",true:"#81b0ff"},thumbColor:c.showDeleted?"#f5dd4b":"#f4f3f4",ios_backgroundColor:"#3e3e3e",onValueChange:c.setShowDeleted,style:{alignSelf:"flex-end",marginBottom:14},value:c.showDeleted})]})})}({columns:t}),H?Object(F.jsx)(Ee,{columns:t,data:n,deleteProps:r,onEdit:o,additionalActions:i,showDeleted:c}):Object(F.jsx)(Ie,{columns:t,data:n,deleteProps:r,onEdit:o,additionalActions:i,showDeleted:c})]})},Ce=n(21),Re=n.n(Ce),Ae="https://warehouse-magnus.azurewebsites.net/";function Le(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(fetch(""+Ae+e));case 2:if(!(t=n.sent).ok){n.next=13;break}return n.prev=4,n.next=7,p.a.awrap(t.json());case 7:return n.abrupt("return",n.sent);case 10:throw n.prev=10,n.t0=n.catch(4),n.t0;case 13:return n.abrupt("return",[]);case 14:case"end":return n.stop()}}),null,null,[[4,10]],Promise)}function ke(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(fetch(""+Ae+e,{method:"PUT",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 2:return n=r.sent,r.abrupt("return",n.ok);case 4:case"end":return r.stop()}}),null,null,null,Promise)}function Ne(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(fetch(""+Ae+e,{method:"POST",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 2:if(!(n=r.sent).ok){r.next=13;break}return r.prev=4,r.next=7,p.a.awrap(n.json());case 7:return r.abrupt("return",r.sent);case 10:throw r.prev=10,r.t0=r.catch(4),r.t0;case 13:return r.abrupt("return",{});case 14:case"end":return r.stop()}}),null,null,[[4,10]],Promise)}function _e(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(fetch(""+Ae+e,{method:"DELETE",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 2:return n=r.sent,r.abrupt("return",n.ok);case 4:case"end":return r.stop()}}),null,null,null,Promise)}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe=function(e){return{type:"EDIT_ITEM",item:e}},We=function(e){return function(t){Ne("api/items/",e).then((function(e){t(function(e){return{type:"ADD_ITEM",item:e}}(e))})).catch((function(e){console.log(e)}))}},Ve=function(){return function(e){Le("api/items/").then((function(t){e(function(e){return{type:"LOAD_ITEMS",items:e}}(t))})).catch((function(e){console.log(e)}))}},ze=function(){return function(e){Le("api/items/get-all").then((function(t){e(function(e){return{type:"LOAD_ALL_ITEMS",items:e}}(t))})).catch((function(e){console.log(e)}))}},He=function(e){return function(t){ke("api/items/",e).then((function(n){n&&t(qe(e))})).catch((function(e){console.log(e)}))}},Fe=function(e){return function(t){_e("api/items/",e).then((function(n){n&&t(function(e){return{type:"DELETE_ITEM",itemId:e}}(e))}))}},Ue=function(e){return function(t){Ne("api/items/buy-item",e).then((function(e){t({type:"BUY_ITEM",buyItem:e})}))}},Ge=function(e){return function(t){Ne("api/items/item-recovery",e).then((function(e){t(qe(e))}))}},Je=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},Xe={items:[],showDeleted:!1};function Ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me()(e);if(t){var o=me()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he()(this,n)}}var Ke=function(e){be()(n,e);var t=Ye(n);function n(){return ue()(this,n),t.apply(this,arguments)}return fe()(n)}(m.a.Component),Qe=function(e){var t,n,r,o,i=e.items,c=e.handleItemChosen,a=e.selectedItem,s=e.label,l=e.border,u=e.style,f=e.placeholder,p=Object(O.useState)(null!=(t=null==a?void 0:a.title)?t:""),b=d()(p,2),j=b[0],h=b[1],m=Object(O.useState)(i),y=d()(m,2),g=y[0],x=y[1],v=Object(O.useRef)(new xe.a.Value(s?50:26.67)).current,w=Object(O.useRef)(new xe.a.Value(26.67)).current,D=Object(O.useRef)(new xe.a.Value(0)).current,P=function(e){xe.a.timing(v,{toValue:e?Math.min(250,50+26.67*g.length):s?50:26.67,duration:200,useNativeDriver:!1}).start(),xe.a.timing(w,{toValue:e?26.67:0,duration:e?400:200,useNativeDriver:!1}).start(),xe.a.timing(D,{toValue:e?200:0,duration:200,useNativeDriver:!1}).start()};return Object(F.jsx)(xe.a.View,{style:{height:v,maxHeight:v,margin:null!=(n=null==u?void 0:u.margin)?n:0,marginBottom:null!=(r=null==u?void 0:u.marginBottom)?r:0,marginTop:null!=(o=null==u?void 0:u.marginTop)?o:0},children:Object(F.jsxs)(ee,{style:{position:"relative",borderColor:"black",height:23,alignSelf:"stretch"},children:[Object(F.jsx)(re,{label:s,onFocus:function(){P(!0)},onBlur:function(){setTimeout((function(){return P(!1)}),200)},value:j,placeholder:f,onChangeText:function(e){h(e),x(i.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())})))},style:{borderWidth:l?1:0}}),Object(F.jsx)(xe.a.View,{style:{maxHeight:D,position:"relative",width:z(300),maxWidth:500,justifyContent:"center",alignItems:"center",alignSelf:"center"},children:Object(F.jsx)(xe.a.View,{style:{maxHeight:D,overflow:"scroll",alignSelf:"stretch"},children:g.map((function(e){return Object(F.jsx)(xe.a.View,{style:{maxHeight:w},children:Object(F.jsx)(E.a,{onPress:function(){!function(e){h(e.title),c(e.id),""===(null==a?void 0:a.id)&&h("")}(e)},style:{paddingLeft:12,height:25},children:Object(F.jsx)(R.a,{children:e.title})},e.id)})}))})})]})})},Ze=function(e){return function(t){t(function(e){return{type:"CHANGE_TITLE",title:e}}(e))}},$e={title:""};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt={name:"",basePrice:"",sellPrice:"",partnerId:"",qtty:""},rt=Object(i.b)((function(e){return{items:e.items.items,partners:e.partners.partners}}),(function(e){return{onItemAdded:function(t){e(We(t))},onItemEdited:function(t){e(He(t))},onModalTitleChanged:function(t){e(Ze(t))}}}))((function(e){var t,n,r=e.itemId,o=e.items,i=e.partners,c=e.onItemAdded,a=e.onModalTitleChanged,s=e.onItemEdited,u=o.find((function(e){return e.id===r})),f=Object(O.useState)(null!=u?u:nt),p=d()(f,2),b=p[0],j=p[1],h=Object(ce.p)(),m=Object(O.useState)(i.map((function(e){return{id:e.id,title:e.name}}))),y=d()(m,1)[0];a(u?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430");var g=function(e,t){j(tt(tt({},b),{},l()({},e,t)))};return Object(F.jsxs)(ae,{children:[Object(F.jsx)(re,{label:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:",onChangeText:function(e){return g("name",e)},value:b.name,border:!0}),Object(F.jsx)(Qe,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u0447\u0438\u043a",selectedItem:u?{id:u.partnerId,title:null!=(t=null==(n=i.find((function(e){return e.id===u.partnerId})))?void 0:n.name)?t:""}:void 0,items:y,handleItemChosen:function(e){j(tt(tt({},b),{},{partnerId:e}))},label:"\u0418\u043c\u0435 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u0447\u0438\u043a",border:!0,style:{marginBottom:15}}),!u&&Object(F.jsx)(re,{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return g("basePrice",e)},value:b.basePrice.toString(),keyboardType:"numeric",border:!0}),!u&&Object(F.jsx)(re,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:",onChangeText:function(e){return g("qtty",e)},value:b.qtty,keyboardType:"numeric",border:!0}),Object(F.jsx)(re,{label:"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return g("sellPrice",e)},value:b.sellPrice.toString(),keyboardType:"numeric",border:!0}),Object(F.jsx)(oe,{label:u?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",onPress:function(){u?s(b):c(b),j(nt),h.navigate("Root")}})]})}));function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct=Object(i.b)(null,(function(e){return{onModalTitleChanged:function(t){e(Ze(t))},onBuyItem:function(t){e(Ue(t))}}}))((function(e){var t=e.item,n=e.onModalTitleChanged,r=e.onBuyItem,o=Object(O.useState)(it(it({},t),{},{qtty:"1"})),i=d()(o,2),c=i[0],a=i[1],s=function(e,t){a(it(it({},c),{},l()({},e,t)))},u=Object(ce.p)();return Object(O.useEffect)((function(){return n("\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430")})),Object(F.jsxs)(ae,{children:[Object(F.jsx)(re,{label:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:",value:c.name,border:!0}),Object(F.jsx)(re,{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return s("basePrice",e)},value:c.basePrice,keyboardType:"numeric",border:!0}),Object(F.jsx)(re,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:",onChangeText:function(e){return s("qtty",e)},value:c.qtty,keyboardType:"numeric",border:!0}),Object(F.jsx)(re,{label:"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430:",value:c.sellPrice,keyboardType:"numeric",border:!0}),Object(F.jsxs)($,{style:{margin:0},children:["\u0421\u0443\u043c\u0430 \u0437\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0430:"," ",Pe(Number(c.qtty)*Number(c.basePrice))]}),Object(F.jsx)(oe,{label:"\u0417\u0430\u0432\u044a\u0440\u0448\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0430",onPress:function(){r({qtty:c.qtty,basePrice:c.basePrice,itemId:c.id}),u.goBack()}})]})}));function at(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me()(e);if(t){var o=me()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he()(this,n)}}var st=function(e){be()(n,e);var t=at(n);function n(){var e;ue()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(Fe(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(F.jsx)(rt,{itemId:t})})},e}return fe()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.listableItems,r=t.columns,o=t.showDeleted,i=[{name:"plus",color:"green",onPress:function(t){e.props.navigation.navigate("Modal",{component:Object(F.jsx)(ct,{item:t})})}}];return Object(F.jsx)(Te,{data:n,columns:r,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u0441\u0442\u043e\u043a\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,additionalActions:i,showDeleted:o})}}]),n}(Ke),lt=Object(i.b)((function(e){return{items:e.items.items}}))(st),ut=Object(i.b)((function(e){return{items:e.items.items,showDeleted:e.items.showDeleted}}),(function(e){return{onItemsLoaded:function(){e(Ve())},onItemRecovery:function(t){e(Ge(t))},onAllItemsLoaded:function(){e(ze())},onShowDeletedChanged:function(t){e(Je(t))}}}))((function(e){var t=e.items,n=e.onItemsLoaded,r=e.onAllItemsLoaded,o=e.onItemRecovery,i=e.showDeleted,c=e.onShowDeletedChanged,a=Object(ce.p)();Object(O.useEffect)((function(){i?r():n()}),[i]);var s=[{name:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",propName:"name",flex:6},{name:H?"\u0414-\u043d\u0430 \u0446\u0435\u043d\u0430":"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430",propName:"basePrice",flex:H?2:1,isRight:!0,isMoney:!0},{name:H?"\u041f-\u043d\u0430 \u0446\u0435\u043d\u0430":"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430",propName:"sellPrice",flex:H?2:1,isRight:!0,isMoney:!0},{name:"\u041a-\u0432\u043e",propName:"qtty",flex:1,isRight:!0,isMoney:!0}];return Object(F.jsx)(ae,{children:Object(F.jsx)(lt,{columns:s,listableItems:t,navigation:a,showDeleted:{showDeleted:i,setShowDeleted:c,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u0441\u0442\u043e\u043a\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:o}}})})})),dt={prefixes:[n(301).a("/Warehouse/")],config:{screens:{Root:"Warehouse/*",ItemsListScreen:{path:"ItemsListScreen"},PartnersListScreen:{path:"PartnersListScreen"},Register:"Register",Modal:"modal"}}},ft=Object(i.b)()((function(){return Object(F.jsx)(ee,{children:Object(F.jsx)($,{onPress:function(e){e.preventDefault()},children:"Register"})})})),pt=n(388);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht=function(e){return{type:"EDIT_PARTNER",partner:e}},Ot=function(e){return function(t){Ne("api/partners/",e).then((function(e){t(function(e){return{type:"ADD_PARTNER",partner:e}}(e))})).catch((function(e){return console.log(e)}))}},mt=function(){return function(e){Le("api/partners/get-all").then((function(t){e(function(e){return{type:"LOAD_PARTNERS",partners:e}}(t))})).catch((function(e){return console.log(e)}))}},yt=function(e){return function(t){ke("api/partners/",e).then((function(n){return n&&t(ht(e))}))}},gt=function(e){return function(t){_e("api/partners/",e).then((function(n){return n&&t(function(e){return{type:"DELETE_PARTNER",partnerId:e}}(e))}))}},xt=function(e){return function(t){Ne("api/partners/partner-recovery",e).then((function(e){t(ht(e))}))}},vt=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},wt={partners:[],showDeleted:!1};function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var St={id:"",address:"",name:"",vatNumber:""},Et=Object(i.b)((function(e){return e.partners}),(function(e){return{onPartnerAdded:function(t){e(Ot(t))},onPartnerEdited:function(t){e(yt(t))},onModalTitleChanged:function(t){e(Ze(t))}}}))((function(e){var t=e.onPartnerAdded,n=e.partners,r=e.onModalTitleChanged,o=e.onPartnerEdited,i=e.partnerId,c=n&&n.find((function(e){return e.id===i})),a=Object(O.useState)(null!=c?c:St),s=d()(a,2),u=s[0],f=s[1],p=Object(ce.p)();r(c?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440");var b=function(e,t){f(Pt(Pt({},u),{},l()({},e,t)))};return Object(F.jsxs)(ae,{children:[Object(F.jsx)(re,{label:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430:",onChangeText:function(e){return b("name",e)},value:u.name,border:!0}),Object(F.jsx)(re,{label:"\u0414\u0414\u0421 \u041d\u043e\u043c\u0435\u0440:",onChangeText:function(e){return b("vatNumber",e)},value:u.vatNumber,border:!0}),Object(F.jsx)(re,{label:"\u0410\u0434\u0440\u0435\u0441:",onChangeText:function(e){return b("address",e)},value:u.address,border:!0}),Object(F.jsx)(oe,{label:c?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435",onPress:function(){c?o(u):t(u),f(St),p.navigate("PartnersListScreen")}})]})}));function It(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me()(e);if(t){var o=me()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he()(this,n)}}var Tt=function(e){be()(n,e);var t=It(n);function n(){var e;ue()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(gt(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(F.jsx)(Et,{partnerId:t})})},e}return fe()(n,[{key:"render",value:function(){var e=this.props,t=e.listableItems,n=e.columns,r=e.showDeleted;return Object(F.jsx)(Te,{data:t,columns:n,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u044f\u0442 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,showDeleted:r})}}]),n}(Ke),Ct=Object(i.b)((function(e){return{partners:e.partners.partners}}))(Tt),Rt=Object(i.b)((function(e){return{partners:e.partners.partners,showDeleted:e.partners.showDeleted}}),(function(e){return{onPartnersLoaded:function(){e(mt())},onPartnerRecovery:function(t){e(xt(t))},setShowDeleted:function(t){e(vt(t))}}}))((function(e){var t=e.onPartnersLoaded,n=e.partners,r=e.onPartnerRecovery,o=e.setShowDeleted,i=e.showDeleted;Object(O.useEffect)((function(){return t()}),[i]);return Object(F.jsx)(ae,{children:Object(F.jsx)(Ct,{columns:[{name:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",propName:"name",flex:4},{name:"\u0414\u0414\u0421 \u041d\u043e\u043c\u0435\u0440",propName:"vatNumber",flex:1,isRight:!0},{name:"\u0410\u0434\u0440\u0435\u0441",propName:"address",flex:2,isRight:!0}],listableItems:n,navigation:Object(ce.p)(),showDeleted:{setShowDeleted:o,showDeleted:i,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u044f \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:r}}})})}));function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=function(e){return{type:"EDIT_SALE",sale:e}},Nt=function(e){return{type:"LOAD_SALES",sales:e}},_t=function(e){return function(t){Ne("api/sales/",e).then((function(e){t(function(e){return{type:"ADD_SALE",sale:e}}(e))})).catch((function(e){console.log(e)}))}},Bt=function(){return function(e){Le("api/sales/").then((function(t){e(Nt(t))})).catch((function(e){console.log(e)}))}},Mt=function(){return function(e){Le("api/sales/get-all").then((function(t){e(Nt(t))})).catch((function(e){console.log(e)}))}},qt=function(e){return function(t){ke("api/sales/",e).then((function(n){n&&t(kt(e))})).catch((function(e){console.log(e)}))}},Wt=function(e){return function(t){_e("api/sales/",e).then((function(n){n&&t(function(e){return{type:"DELETE_SALE",saleId:e}}(e))}))}},Vt=function(e){return function(t){Ne("api/sales/sale-recovery",e).then((function(e){t(kt(e))}))}},zt=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},Ht={sales:[],showDeleted:!1},Ft=function(){return(Math.random()+1).toString(36).substring(7)};function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jt=function(e){var t,n=e.items,r=e.saleItems,o=e.setSelectedItems,i=(e.sale,Object(O.useState)({id:"",title:""})),c=d()(i,2),a=c[0],s=c[1],l=Object(O.useState)(n.map((function(e){return{id:e.id,title:e.name}}))),u=d()(l,1)[0];return Object(F.jsxs)(ee,{style:{width:z(300),height:W()-220},children:[Object(F.jsxs)(ee,{style:{display:"flex",flexDirection:"row",borderBottomWidth:2,borderBottomColor:"grey",backgroundColor:"none"},children:[Object(F.jsx)(ee,{style:{flexDirection:"row",flex:5,justifyContent:"flex-start"},children:Object(F.jsx)($,{children:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:"})}),Object(F.jsx)(ee,{style:{flexDirection:"row",flex:1,justifyContent:"center"},children:Object(F.jsx)($,{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"})}),Object(F.jsx)(ee,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(F.jsx)($,{children:"\u0426\u0435\u043d\u0430:"})}),Object(F.jsx)(ee,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(F.jsx)($,{children:"\u041e\u0431\u0449\u043e \u0441\u0443\u043c\u0430:"})})]}),r&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(ee,{style:{height:W()-260,overflow:"scroll"},children:[r.map((function(e){var t,i=Number(e.qtty)<=Number(null==(t=n.find((function(t){return t.id===e.itemId})))?void 0:t.qtty);return Object(F.jsxs)(ee,{style:{display:"flex",flexDirection:"row",borderBottomWidth:1,borderBottomColor:"grey"},children:[Object(F.jsx)(ee,{style:{flexDirection:"row",flex:5,alignSelf:"stretch"},children:Object(F.jsx)(Qe,{selectedItem:{id:e.itemId,title:e.name},placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",items:u,handleItemChosen:function(t){setTimeout((function(){var i=n.find((function(e){return e.id===t}));o(r.map((function(t){return e.uniqueId===t.uniqueId?{id:"",uniqueId:Ft(),itemId:i.id,name:i.name,qtty:"1",price:i.sellPrice,total:Pe(Number(i.sellPrice))}:t})))}),300)}},e.itemId)}),Object(F.jsx)(re,{autoFocus:!0,keyboardType:"numeric",style:{textAlign:"center",borderWidth:i?0:1,flexDirection:"row",flex:1,alignSelf:"stretch",borderColor:i?"white":"red"},value:e.qtty.toString(),onChangeText:function(t){return o(r.map((function(n){return e.uniqueId===n.uniqueId?Gt(Gt({},n),{},{qtty:t,total:Pe(Number(t)*Number(n.price))}):n})))}}),Object(F.jsx)(re,{style:{textAlign:"center",borderWidth:0,flexDirection:"row",flex:1,alignSelf:"stretch"},keyboardType:"numeric",value:e.price.toString(),onChangeText:function(t){return o(r.map((function(n){return e.uniqueId===n.uniqueId?Gt(Gt({},n),{},{price:t,total:Pe(Number(n.qtty)*Number(t))}):n})))}}),Object(F.jsx)($,{style:{flexDirection:"row",flex:1,textAlign:"center"},children:Se(e.total)})]},e.itemId)})),Object(F.jsxs)(ee,{style:{display:"flex",flexDirection:"row",borderBottomWidth:1,borderBottomColor:"grey"},children:[Object(F.jsx)(ee,{style:{flexDirection:"row",flex:5},children:Object(F.jsx)(Qe,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",selectedItem:a,items:u,handleItemChosen:function(e){var t=n.find((function(t){return t.id===e}));o([].concat(Re()(r),[{id:"",uniqueId:Ft(),itemId:t.id,name:t.name,qtty:"1",price:t.sellPrice,total:Pe(Number(t.sellPrice))}])),s({id:"",title:""})}})}),Object(F.jsx)(ee,{style:{flexDirection:"row",flex:1,justifyContent:"center"},children:Object(F.jsx)($,{})}),Object(F.jsx)(ee,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(F.jsx)($,{})}),Object(F.jsx)(ee,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(F.jsx)($,{})})]})]}),Object(F.jsxs)(ee,{style:{display:"flex",flexDirection:"row",borderBottomWidth:2,borderBottomColor:"grey",backgroundColor:"none",height:30},children:[Object(F.jsx)(ee,{style:{flexDirection:"row",flex:6},children:Object(F.jsx)($,{})}),Object(F.jsx)(ee,{style:{flexDirection:"row",flex:1,justifyContent:"flex-start"},children:Object(F.jsx)($,{children:"\u041e\u0431\u0449\u043e \u0441\u0443\u043c\u0430:"})}),Object(F.jsx)(ee,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(F.jsx)($,{children:Pe(r.length>0?null==r||null==(t=r.map((function(e){return Number(e.total)})))?void 0:t.reduce((function(e,t){return e+t})):0)})})]})]})]})};function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt={id:"",date:new Date,isDeleted:!1,description:"",saleItems:[],partnerId:"",totalAmount:0},Qt=Object(i.b)((function(e){return{sales:e.sales.sales,partners:e.partners.partners,items:e.items.items}}),(function(e){return{onSaleAdded:function(t){e(_t(t))},onSaleEdited:function(t){e(qt(t))},onModalTitleChanged:function(t){e(Ze(t))}}}))((function(e){var t,n,r=e.saleId,o=e.sales,i=e.onSaleAdded,c=e.onModalTitleChanged,a=e.onSaleEdited,s=e.partners,l=e.items,u=o.find((function(e){return e.id===r})),f=Object(O.useState)(null!=u?u:Kt),p=d()(f,2),b=p[0],j=p[1],h=Object(O.useState)(s.map((function(e){return{id:e.id,title:e.name}}))),m=d()(h,1)[0],y=Object(ce.p)();c(u?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430");var g=Object(O.useState)(u?u.saleItems.map((function(e){return{uniqueId:Ft(),itemId:e.itemId,name:e.name,qtty:e.qtty,total:e.total,price:e.price,id:e.id}})):[]),x=d()(g,2),v=x[0],w=x[1];return Object(F.jsx)(ae,{children:Object(F.jsxs)(ee,{style:{height:W()},children:[Object(F.jsx)(Qe,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",selectedItem:u?{id:u.partnerId,title:null!=(t=null==(n=s.find((function(e){return e.id===u.partnerId})))?void 0:n.name)?t:""}:void 0,items:m,handleItemChosen:function(e){j(Yt(Yt({},b),{},{partnerId:e}))},label:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",border:!0,style:{marginBottom:15}}),Object(F.jsx)(Jt,{items:l,saleItems:v,setSelectedItems:w,sale:b}),Object(F.jsx)(oe,{disabled:void 0===v||0===v.length||""===b.partnerId,label:u?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",onPress:function(){b.totalAmount=v.map((function(e){return Number(e.total)})).reduce((function(e,t){return e+t})),b.saleItems=v,u?a(b):i(b),j(Kt),y.navigate("Root")},style:{alignSelf:"center"}})]})})}));function Zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me()(e);if(t){var o=me()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he()(this,n)}}var $t=function(e){be()(n,e);var t=Zt(n);function n(){var e;ue()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(Wt(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(F.jsx)(Qt,{saleId:t})})},e}return fe()(n,[{key:"render",value:function(){var e=this.props,t=e.listableItems,n=e.columns,r=e.showDeleted;return Object(F.jsx)(Te,{data:t,columns:n,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,showDeleted:r})}}]),n}(Ke),en=Object(i.b)((function(e){return{sales:e.sales.sales}}))($t),tn=Object(i.b)((function(e){var t,n;return{sales:(null==(t=e.sales)?void 0:t.sales)||[],partners:(null==(n=e.partners)?void 0:n.partners)||[],showDeleted:e.sales.showDeleted}}),(function(e){return{onSalesLoaded:function(){e(Bt())},onSaleRecovery:function(t){e(Vt(t))},onAllSalesLoaded:function(){e(Mt())},onPartnersLoaded:function(){e(mt())},onItemsLoaded:function(){e(ze())},setShowDeleted:function(t){e(zt(t))}}}))((function(e){var t=e.sales,n=e.partners,r=e.onSalesLoaded,o=e.onSaleRecovery,i=e.onItemsLoaded,c=e.onPartnersLoaded,a=e.onAllSalesLoaded,s=e.showDeleted,l=e.setShowDeleted,u=Object(ce.p)();Object(O.useEffect)((function(){s?a():r(),i(),c()}),[s]);var d=[{name:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",propName:"partner",flex:6},{name:"\u0414\u0430\u0442\u0430",propName:"date",flex:H?2:1,isRight:!0},{name:"\u041e\u0431\u0449\u0430 \u0441\u0443\u043c\u0430",propName:"total",flex:H?2:1,isRight:!0}];return Object(F.jsx)(ae,{children:Object(F.jsx)(en,{columns:d,listableItems:t.map((function(e){var t,r;return{id:e.id,partner:null!=(t=null==(r=n.find((function(t){return t.id===e.partnerId})))?void 0:r.name)?t:"",date:we(e.date),description:e.description,total:Pe(e.totalAmount),isDeleted:e.isDeleted}})),navigation:u,showDeleted:{setShowDeleted:l,showDeleted:s,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:o}}})})})),nn=Object(i.b)((function(e){return e.title}),null)((function(e){var t=e.colorScheme,n=e.title;return Object(F.jsx)(w.a,{linking:dt,theme:"dark"===t?D.a:P.a,children:Object(F.jsx)(on,{title:n})})})),rn=Object(S.a)();function on(e){var t=e.title;return Object(F.jsxs)(rn.Navigator,{children:[Object(F.jsx)(rn.Screen,{name:"Root",component:cn,options:{headerShown:!1}}),Object(F.jsx)(rn.Group,{screenOptions:{presentation:"modal"},children:Object(F.jsx)(rn.Screen,{name:"Modal",component:ie,options:{title:t,headerTitleAlign:"center"}})})]})}function cn(e){var t=e.navigation,n=Object(pt.a)();return Object(F.jsx)(n.Navigator,{children:Object(F.jsxs)(n.Group,{children:[Object(F.jsx)(n.Screen,{name:"SalesListScreen",component:tn,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0438",headerTitleAlign:"center",headerRight:function(){return Object(F.jsx)(E.a,{onPress:function(e){e.preventDefault(),t.navigate("Modal",{component:Object(F.jsx)(Qt,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(F.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})})}}}),Object(F.jsx)(n.Screen,{name:"ItemsListScreen",navigationKey:"/ItemsListScreen",component:ut,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441\u044a\u0441 \u0441\u0442\u043e\u043a\u0438",headerTitleAlign:"center",headerRight:function(){return Object(F.jsx)(E.a,{onPress:function(e){e.preventDefault(),t.navigate("Modal",{component:Object(F.jsx)(rt,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(F.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})})}}}),Object(F.jsx)(n.Screen,{name:"PartnersListScreen",navigationKey:"PartnersListScreen",component:Rt,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0438",headerTitleAlign:"center",headerRight:function(){return Object(F.jsx)(E.a,{onPress:function(e){e.preventDefault(),t.navigate("Modal",{component:Object(F.jsx)(Et,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(F.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})})}}}),Object(F.jsx)(n.Screen,{name:"Register",component:ft})]})})}var an=n(150),sn=n(298),ln={items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_ITEM":return Me(Me({},e),{},{items:[].concat(Re()(e.items),[n.item])});case"LOAD_ITEMS":case"LOAD_ALL_ITEMS":return Me(Me({},e),{},{items:n.items});case"EDIT_ITEM":return Me(Me({},e),{},{items:Re()(e.items.map((function(e){return e.id===n.item.id?Me({},n.item):e})))});case"DELETE_ITEM":return Me(Me({},e),{},{items:e.showDeleted?Re()(e.items.map((function(e){return e.id===n.itemId?Me(Me({},e),{},{isDeleted:!0}):e}))):Re()(e.items.filter((function(e){return e.id!==n.itemId})))});case"BUY_ITEM":return Me(Me({},e),{},{items:Re()(e.items.map((function(e){return e.id===n.buyItem.itemId?Me(Me({},e),{},{qtty:(Number(e.qtty)+Number(n.buyItem.qtty)).toString(),basePrice:n.buyItem.basePrice}):e})))});case"SET_SHOW_DELETED":return Me(Me({},e),{},{showDeleted:n.showDeleted});default:return e}},title:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"CHANGE_TITLE":return{title:n.title};default:return e}},partners:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_PARTNER":return jt(jt({},e),{},{partners:[].concat(Re()(e.partners),[n.partner])});case"LOAD_PARTNERS":return jt(jt({},e),{},{partners:n.partners});case"EDIT_PARTNER":return jt(jt({},e),{},{partners:Re()(e.partners.map((function(e){return e.id===n.partner.id?jt({},n.partner):e})))});case"DELETE_PARTNER":return jt(jt({},e),{},{partners:Re()(e.partners.map((function(e){return e.id===n.partnerId?jt(jt({},e),{},{isDeleted:!0}):e})))});case"SET_SHOW_DELETED":return jt(jt({},e),{},{showDeleted:n.showDeleted});default:return e}},sales:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_SALE":return Lt(Lt({},e),{},{sales:[].concat(Re()(e.sales),[n.sale])});case"LOAD_SALES":case"LOAD_ALL_SALES":return Lt(Lt({},e),{},{sales:n.sales});case"EDIT_SALE":return Lt(Lt({},e),{},{sales:Re()(e.sales.map((function(e){return e.id===n.sale.id?Lt({},n.sale):e})))});case"DELETE_SALE":return Lt(Lt({},e),{},{sales:e.showDeleted?Re()(e.sales.map((function(e){return e.id===n.saleId?Lt(Lt({},e),{},{isDeleted:!0}):e}))):Re()(e.sales.filter((function(e){return e.id!==n.saleId})))});case"SET_SHOW_DELETED":return Lt(Lt({},e),{},{showDeleted:n.showDeleted});default:return e}}};function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){var t=[sn.a],n=Object(an.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},ln)),r=[],o="undefined"===typeof window?null:window;return o&&o.__REDUX_DEVTOOLS_EXTENSION__&&r.push(o.__REDUX_DEVTOOLS_EXTENSION__()),Object(an.d)(n,e,an.c.apply(void 0,[an.a.apply(void 0,t)].concat(r)))}function fn(){var e=function(){var e=Object(O.useState)(!1),t=d()(e,2),r=t[0],o=t[1];return Object(O.useEffect)((function(){p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h.b(),e.next=4,p.a.awrap(j.b(g(g({},b.a.font),{},{"space-mono":n(342)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),h.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=v(),s=dn();return e?Object(F.jsxs)(o.b,{children:[Object(F.jsx)(i.a,{store:s,children:Object(F.jsx)(a.a,{children:Object(F.jsx)(c.a,{children:Object(F.jsx)(nn,{colorScheme:t,title:s.getState().title.title})})})}),Object(F.jsx)(r.a,{})]}):null}!function(){if("web"===I.a.OS){var e=document.createElement("style");e.textContent="textarea, select, input, button { outline: none !important; }",e.textContent+="div::-webkit-scrollbar { width: 0; }",document.head.append(e)}}()},311:function(e,t,n){e.exports=n(371)},342:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},356:function(e,t){}},[[311,1,2]]]);
//# sourceMappingURL=app.b1763019.chunk.js.map