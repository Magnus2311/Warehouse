(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{259:function(e,t,n){"use strict";var r=n(167),o=n(348),c=n(41),a=n(118),s=n(349),i=n(5),u=n.n(i),l=n(9),f=n.n(l),d=n(10),p=n.n(d),b=n(338),j=n(344),h=n(189),O=n(0),m=n.n(O);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=n(238);function v(){return Object(g.a)()}var w=n(340),P=n(341),S=n(163),D=n(345),E=n(12),T=n(18),I=n.n(T),k=n(55),C=n(11),R=n(79),A=n(239),_={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc",borderColor:"rgb(0, 255, 0)"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff",borderColor:"rgb(0, 255, 0)"}},L=n(42),N=n(90),B=L.a.get("window"),M=B.width,U=(B.height,function(){return L.a.get("window").height}),W=M/320;function q(e){var t=e*W;return"ios"===E.a.OS?Math.round(N.a.roundToNearestPixel(t)):Math.round(N.a.roundToNearestPixel(t))-2}var G=M<600,V=("android"===E.a.OS||E.a.OS,E.a.OS,E.a.OS,n(6)),z=["style","lightColor","darkColor"],F=["style","lightColor","darkColor"],H=["style","lightColor","darkColor"],K=["style","lightColor","darkColor","border"],J=["style","lightColor","darkColor","onPress","label"];function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t){var n=v(),r=e[n];return r||_[n][t]}function $(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=I()(e,z),c=Z({light:n,dark:r},"text");return Object(V.jsx)(k.a,X({style:[{color:c,margin:"auto"},t]},o))}function Q(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=I()(e,F),c=Z({light:n,dark:r},"background");return Object(V.jsx)(C.a,X({style:[{backgroundColor:c},t]},o))}function ee(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=I()(e,H),c=Z({light:n,dark:r},"background");return Object(V.jsx)(C.a,X({style:[{backgroundColor:c,paddingTop:q(8)},t]},o))}function te(){return Object(V.jsx)(Q,{style:{marginVertical:q(10),height:1,width:q(300)},lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"})}function ne(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=e.border,c=I()(e,K),a=Z({light:n,dark:r},"text"),s=e.label;return s?Object(V.jsx)(Q,{style:[{width:q(300),marginBottom:10,justifyContent:"center",alignItems:"center",borderWidth:0}],children:Object(V.jsxs)(Q,{style:{borderWidth:0},children:[Object(V.jsx)($,{style:{marginLeft:1,marginBottom:2},children:s}),Object(V.jsx)(R.a,X({style:[{color:a,borderColor:a,width:q(300),maxWidth:500,borderRadius:5,padding:3,paddingBottom:5,paddingLeft:5,borderWidth:o?1:0},t]},c))]})}):Object(V.jsx)(R.a,X({style:[{color:a,borderColor:a,borderWidth:0,width:q(300),maxWidth:500,borderRadius:5,padding:3,paddingBottom:5,paddingLeft:5},t]},c))}function re(e){var t=e.style,n=(e.lightColor,e.darkColor,e.onPress),r=e.label,o=I()(e,J);return Object(V.jsx)(A.a,X(X({style:[{backgroundColor:o.disabled?"rgba(35, 134, 38, 0.45)":"rgba(35, 134, 38, 0.9)",borderWidth:1,padding:5,borderRadius:5,width:q(300),maxWidth:500,alignItems:"center",marginTop:q(5),borderColor:"rgba(240,246,252,0.1)",zIndex:1},t],onPress:n},o),{},{children:Object(V.jsx)($,{style:{color:"white"},children:r})}))}var oe,ce=function(e){var t=e.route.params.component;return Object(V.jsxs)(Q,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[t,Object(V.jsx)(r.a,{style:"ios"===E.a.OS?"light":"auto"})]})},ae={prefixes:[n(260).a("/Warehouse/")],config:{screens:{Warehouse:{path:"Warehouse"},ItemsListScreen:{path:"ItemsListScreen"},PartnersListScreen:{path:"PartnersListScreen"},Register:"Register",Modal:"modal"}}},se=n(342),ie=n(48),ue=n(66),le=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},fe=n(72);!function(e){e[e.Dev=0]="Dev",e[e.Testing=1]="Testing",e[e.Production=2]="Production"}(oe||(oe={}));var de=oe.Production,pe=oe.Production,be=oe.Production,je=function(e){switch(e){case oe.Dev:return"https://localhost:5001/";case oe.Testing:return"https://warehouse-magnus-testing.azurewebsites.net/";case oe.Production:return"https://warehouse-magnus.azurewebsites.net/"}}(de),he=function(e){switch(e){case oe.Dev:return"https://localhost:7206/api";case oe.Testing:case oe.Production:return"https://magnus-sso.azurewebsites.net/api"}}(pe),Oe=function(e){switch(e){case oe.Dev:return"http://192.168.0.129:19006";case oe.Testing:case oe.Production:return"https://magnus2311.github.io/Warehouse"}}(be);function me(e){var t,n,r=arguments;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=r.length>1&&void 0!==r[1]&&r[1],o.next=3,p.a.awrap(fetch(""+(t?he:je)+e));case 3:if(!(n=o.sent).ok){o.next=14;break}return o.prev=5,o.next=8,p.a.awrap(n.json());case 8:return o.abrupt("return",o.sent);case 11:throw o.prev=11,o.t0=o.catch(5),o.t0;case 14:return o.abrupt("return",[]);case 15:case"end":return o.stop()}}),null,null,[[5,11]],Promise)}function ye(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(fetch(""+je+e,{method:"PUT",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 2:return n=r.sent,r.abrupt("return",n.ok);case 4:case"end":return r.stop()}}),null,null,null,Promise)}function xe(e,t){var n,r,o=arguments;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=o.length>2&&void 0!==o[2]&&o[2],c.next=3,p.a.awrap(fetch(""+(n?he:je)+e,{method:"POST",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 3:if(!(r=c.sent).ok){c.next=14;break}return c.prev=5,c.next=8,p.a.awrap(r.json());case 8:return c.abrupt("return",c.sent);case 11:throw c.prev=11,c.t0=c.catch(5),c.t0;case 14:return c.abrupt("return",{});case 15:case"end":return c.stop()}}),null,null,[[5,11]],Promise)}function ge(e,t){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(fetch(""+je+e,{method:"DELETE",credentials:"omit",cache:"no-cache",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 2:return n=r.sent,r.abrupt("return",n.ok);case 4:case"end":return r.stop()}}),null,null,null,Promise)}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=function(){var e,t,n,r,o;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r={},c.next=3,p.a.awrap(Ee());case 3:if(c.t0=e=c.sent,null==c.t0){c.next=8;break}c.t1=e,c.next=9;break;case 8:c.t1="";case 9:return r.accessToken=c.t1,c.next=12,p.a.awrap(De());case 12:if(c.t2=t=c.sent,null==c.t2){c.next=17;break}c.t3=t,c.next=18;break;case 17:c.t3="";case 18:return r.refreshToken=c.t3,c.next=21,p.a.awrap(Te());case 21:if(c.t4=n=c.sent,null==c.t4){c.next=26;break}c.t5=n,c.next=27;break;case 26:c.t5={};case 27:return o=c.t5,r.username=o.username,r.email=o.email,c.abrupt("return",r);case 31:case"end":return c.stop()}}),null,null,null,Promise)},Se=function(e){var t,n,r,o,c;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=JSON.stringify({username:e.username,email:e.email}),a.next=4,p.a.awrap(fe.a.setItem("@USER_STORAGE_KEY",t));case 4:return n={value:e.accessToken,created:new Date},r=JSON.stringify(n),a.next=8,p.a.awrap(fe.a.setItem("@USER_STORAGE_ACCESS_TOKEN",r));case 8:return o={value:e.refreshToken,created:new Date},c=JSON.stringify(o),a.next=12,p.a.awrap(fe.a.setItem("@USER_STORAGE_REFRESH_TOKEN",c));case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}}),null,null,[[0,14]],Promise)},De=function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(fe.a.getItem("@USER_STORAGE_REFRESH_TOKEN"));case 3:if(null===(e=n.sent)){n.next=12;break}if(t=JSON.parse(e),!(new Date((new Date).toUTCString()).getTime()-new Date(t.created).getTime()<31536e6)){n.next=10;break}return n.abrupt("return",t.value);case 10:return n.next=12,p.a.awrap(fe.a.removeItem("@USER_STORAGE_REFRESH_TOKEN"));case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0);case 17:return n.abrupt("return",null);case 18:case"end":return n.stop()}}),null,null,[[0,14]],Promise)},Ee=function e(){var t,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.awrap(fe.a.getItem("@USER_STORAGE_ACCESS_TOKEN"));case 3:if(null===(t=r.sent)){r.next=22;break}if(!(n=JSON.parse(t)).value||""===n.value){r.next=20;break}if(!(new Date((new Date).toUTCString()).getTime()-new Date(n.created).getTime()<36e5)){r.next=12;break}return r.abrupt("return",n.value);case 12:return r.next=14,p.a.awrap(fe.a.removeItem("@USER_STORAGE_ACCESS_TOKEN"));case 14:return r.next=16,p.a.awrap(Ie());case 16:if(!r.sent){r.next=20;break}return r.next=19,p.a.awrap(e());case 19:return r.abrupt("return",r.sent);case 20:r.next=28;break;case 22:return r.next=24,p.a.awrap(Ie());case 24:if(!r.sent){r.next=28;break}return r.next=27,p.a.awrap(e());case 27:return r.abrupt("return",r.sent);case 28:r.next=33;break;case 30:r.prev=30,r.t0=r.catch(0),console.log(r.t0);case 33:return r.abrupt("return",void 0);case 34:case"end":return r.stop()}}),null,null,[[0,30]],Promise)},Te=function(){var e,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(fe.a.getItem("@USER_STORAGE_KEY"));case 3:if(null===(e=n.sent)){n.next=8;break}if(!(t=JSON.parse(e))){n.next=8;break}return n.abrupt("return",t);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:return n.abrupt("return",null);case 14:case"end":return n.stop()}}),null,null,[[0,10]],Promise)},Ie=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(De());case 2:if(!t.sent){t.next=11;break}return t.next=6,p.a.awrap(p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=me,e.next=3,p.a.awrap(De());case 3:return e.t1=e.sent,e.t2="/users/try-login?refreshToken="+e.t1,e.abrupt("return",(0,e.t0)(e.t2,!0));case 6:case"end":return e.stop()}}),null,null,null,Promise));case 6:if(!(e=t.sent.accessToken)||""===e){t.next=11;break}return t.next=10,p.a.awrap(ke(e));case 10:return t.abrupt("return",!0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),null,null,null,Promise)},ke=function(e){var t,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={value:e,created:new Date},n=JSON.stringify(t),r.next=4,p.a.awrap(fe.a.setItem("@USER_STORAGE_ACCESS_TOKEN",n));case 4:case"end":return r.stop()}}),null,null,null,Promise)},Ce=function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.awrap(fe.a.removeItem("@USER_STORAGE_KEY"));case 2:return e.next=4,p.a.awrap(fe.a.removeItem("@USER_STORAGE_ACCESS_TOKEN"));case 4:return e.next=6,p.a.awrap(fe.a.removeItem("@USER_STORAGE_REFRESH_TOKEN"));case 6:case"end":return e.stop()}}),null,null,null,Promise)};function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e,Le,Ne=function(e){return function(t){(function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=p.a,n.t1=xe,n.t2=we,n.t3=we({},e),n.t4={},n.next=7,p.a.awrap(Ee());case 7:return n.t5=n.sent,n.next=10,p.a.awrap(De());case 10:return n.t6=n.sent,n.t7={accessToken:n.t5,refreshToken:n.t6},n.t8=(0,n.t2)(n.t3,n.t4,n.t7),n.t9=(0,n.t1)("/users/login",n.t8,!0),n.next=16,n.t0.awrap.call(n.t0,n.t9);case 16:return t=n.sent,n.next=19,p.a.awrap(Se(t));case 19:return n.abrupt("return",t);case 20:case"end":return n.stop()}}),null,null,null,Promise)})(e).then((function(e){t(function(e){return{type:"LOGIN_USER",user:e}}(e))}))}},Be=function(e){return function(t){t(function(e){return{type:"INIT_USER",user:e}}(e))}},Me=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.awrap(Ce());case 2:return e.t0=xe,e.next=5,p.a.awrap(De());case 5:return e.t1=e.sent,e.t2={refreshToken:e.t1},e.abrupt("return",(0,e.t0)("/users/logout",e.t2,!0));case 8:case"end":return e.stop()}}),null,null,null,Promise).then((function(){e({type:"LOGOUT"})})));case 2:case"end":return t.stop()}}),null,null,null,Promise)}},Ue={username:"",email:"",accessToken:"",refreshToken:""},We=Object(c.b)(null,(function(e){return{onLogin:function(t){e(Ne(t))}}}))((function(e){var t=e.onLogin,n=Object(O.useState)(""),r=f()(n,2),o=r[0],c=r[1],a=Object(O.useState)(""),s=f()(a,2),i=s[0],u=s[1];Object(ie.p)();return Object(V.jsxs)(Q,{style:{flex:1,alignItems:"center",justifyContent:"flex-start"},children:[Object(V.jsx)(Q,{children:Object(V.jsx)($,{children:"Login in Warehouse"})}),Object(V.jsx)(ne,{onChangeText:function(e){c(e)},value:o,label:"Username",placeholder:"Enter your username",autoFocus:!0,border:!0}),Object(V.jsx)(ne,{onChangeText:function(e){u(e)},value:i,label:"Password",placeholder:"Enter your password",keyboardType:"visible-password",border:!0,secureTextEntry:!0}),Object(V.jsx)(re,{onPress:function(){var e=le(o);t({username:e?"":o,email:e?o:"",password:i})},style:{width:"100%"},label:"Login"})]})})),qe=Object(c.b)(null,(function(e){return{onLogout:function(){e(Me())}}}))((function(e){var t=e.onLogout;return Object(V.jsx)(ue.a,{onPress:t,children:Object(V.jsx)(b.a,{name:"sign-out",size:30,color:"green",style:{marginRight:15}})})}));!function(e){e[e.Warehouse=1]="Warehouse"}(_e||(_e={})),function(e){e[e.Email=0]="Email",e[e.Username=1]="Username",e[e.Password=2]="Password",e[e.ConfirmPassword=3]="ConfirmPassword"}(Le||(Le={}));var Ge=function(){var e=Object(O.useState)(!0),t=f()(e,2),n=t[0],r=t[1],o=Object(O.useState)(!0),c=f()(o,2),a=(c[0],c[1]),s=Object(O.useState)(""),i=f()(s,2),u=i[0],l=i[1],d=Object(O.useState)(!0),p=f()(d,2),b=p[0],j=p[1],h=Object(O.useState)(!1),m=f()(h,2),y=m[0],x=m[1],g=Object(O.useState)(""),v=f()(g,2),w=v[0],P=v[1],S=Object(O.useState)(""),D=f()(S,2),E=D[0],T=D[1],I=Object(O.useState)(""),k=f()(I,2),C=k[0],R=k[1],A=Object(ie.p)(),_=function(e,t){switch(e){case Le.Email:var o=le(t);r(o),x(!!(t&&""!==t&&o&&E&&""!==E)&&b);case Le.Username:(function(e){return me("/users/check-username-availability?username="+e,!0)})(t).then((function(e){return a(e)}));break;case Le.Password:x(!(!t||!C||t!==C)&&n);break;case Le.ConfirmPassword:x(!(!t||!E||t!==E||""===w)&&n)}};return Object(V.jsxs)(Q,{style:{flex:1,alignItems:"center",justifyContent:"flex-start"},children:[Object(V.jsx)(Q,{children:Object(V.jsx)($,{children:"Let's get started"})}),Object(V.jsx)(Q,{children:Object(V.jsx)($,{children:"Sign up for free and get a lot of perks!"})}),Object(V.jsx)(ne,{onChangeText:function(e){P(e),_(Le.Username,e)},value:w,label:"Username",placeholder:"Enter your username",autoFocus:!0,border:!0}),Object(V.jsx)(ne,{onChangeText:function(e){l(e),_(Le.Email,e)},value:u,label:"E-mail",placeholder:"Enter your email",autoFocus:!0,border:!0}),Object(V.jsxs)(Q,{style:{display:"flex"},children:[Object(V.jsx)(ne,{onChangeText:function(e){T(e),""===e&&""===C&&j(!0),_(Le.Password,e)},value:E,label:"Password",placeholder:"Enter your password",keyboardType:"visible-password",border:!0,secureTextEntry:!0}),Object(V.jsx)(ne,{onChangeText:function(e){R(e),j(e===E),_(Le.ConfirmPassword,e)},value:C,label:"Confirm password",placeholder:"Confirm your password",border:!0,secureTextEntry:!0})]}),Object(V.jsx)(re,{onPress:function(){var e={username:w,password:E,email:u,callbackUrl:Oe+"/registration/email-confirmed",senderType:_e.Warehouse};xe("/users/register",e,!0),A.navigate("PartnersListScreen")},style:{width:"100%"},disabled:!y,label:"Register"})]})},Ve=n(17),ze=function(e){var t,n,r,o,c=e.items,a=e.handleItemChosen,s=e.selectedItem,i=e.label,u=e.border,l=e.style,d=e.placeholder,p=Object(O.useState)(!1),b=f()(p,2),j=(b[0],b[1]),h=Object(O.useState)(null!=(t=null==s?void 0:s.title)?t:""),m=f()(h,2),y=m[0],x=m[1],g=Object(O.useState)(c),v=f()(g,2),w=v[0],P=v[1],S=Object(O.useRef)(new Ve.a.Value(i?50:26.67)).current,D=Object(O.useRef)(new Ve.a.Value(26.67)).current,E=Object(O.useRef)(new Ve.a.Value(0)).current,T=function(e){Ve.a.timing(S,{toValue:e?Math.min(250,50+26.67*w.length):i?50:26.67,duration:200,useNativeDriver:!1}).start(),Ve.a.timing(D,{toValue:e?26.67:0,duration:e?400:200,useNativeDriver:!1}).start(),Ve.a.timing(E,{toValue:e?200:0,duration:200,useNativeDriver:!1}).start(),j(e)};return Object(V.jsx)(Ve.a.View,{style:{height:S,maxHeight:S,margin:null!=(n=null==l?void 0:l.margin)?n:0,marginBottom:null!=(r=null==l?void 0:l.marginBottom)?r:0,marginTop:null!=(o=null==l?void 0:l.marginTop)?o:0,width:q(300)},children:Object(V.jsxs)(Q,{style:{position:"relative",borderColor:"black",height:23,alignSelf:"stretch"},children:[Object(V.jsx)(ne,{label:i,onFocus:function(){T(!0)},onBlur:function(){setTimeout((function(){return T(!1)}),200)},value:y,placeholder:d,onChangeText:function(e){x(e),P(c.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())})))},style:{borderWidth:u?1:0}}),Object(V.jsx)(Ve.a.View,{style:{maxHeight:E,position:"relative",width:q(300),maxWidth:500,justifyContent:"center",alignItems:"center",alignSelf:"center"},children:Object(V.jsx)(Ve.a.View,{style:{maxHeight:E,overflow:"scroll",alignSelf:"stretch"},children:w.map((function(e){return Object(V.jsx)(Ve.a.View,{style:{maxHeight:D},children:Object(V.jsx)(ue.a,{onPress:function(){!function(e){x(e.title),a(e.id),""===(null==s?void 0:s.id)&&x("")}(e)},style:{paddingLeft:12,height:25},children:Object(V.jsx)(k.a,{children:e.title})},e.id)},e.id)}))})})]})})};function Fe(e){var t=e.title,n=e.children;return Object(V.jsxs)(ee,{style:He.container,children:[t&&Object(V.jsx)($,{style:He.title,children:t}),t&&Object(V.jsx)(te,{}),n]})}var He=n(8).a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Ke=n(21),Je=n.n(Ke);function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=function(e){return{type:"ADD_ITEM",item:e}},$e=function(e){return{type:"EDIT_ITEM",item:e}},Qe=function(e){return{type:"LOAD_ITEMS",items:e}},et=function(e){return{type:"LOAD_ALL_ITEMS",items:e}},tt=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=xe,n.t1=Xe,n.t2=Xe({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/items/",n.t6).then((function(e){t(Ze(e))})).catch((function(e){console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},nt=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/items?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){t&&Array.isArray(t)&&e(Qe(t))})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},rt=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/items/get-all?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){t&&Array.isArray(t)&&e(et(t))})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},ot=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ye,n.t1=Xe,n.t2=Xe({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/items/",n.t6).then((function(n){n&&t($e(e))})).catch((function(e){console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},ct=function(e){return function(t){ge("api/items/",e).then((function(n){n&&t(function(e){return{type:"DELETE_ITEM",itemId:e}}(e))}))}},at=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=xe,n.t1=Xe,n.t2=Xe({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/items/buy-item",n.t6).then((function(e){t({type:"BUY_ITEM",buyItem:e})}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},st=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=xe,n.t1=e,n.next=4,p.a.awrap(Ee());case 4:n.t2=n.sent,n.t3={itemId:n.t1,accessToken:n.t2},(0,n.t0)("api/items/item-recovery",n.t3).then((function(e){t($e(e))}));case 7:case"end":return n.stop()}}),null,null,null,Promise)}},it=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},ut={items:[],showDeleted:!1},lt=function(e){return function(t){t(function(e){return{type:"CHANGE_TITLE",title:e}}(e))}},ft={title:""};function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bt={name:"",basePrice:"",sellPrice:"",partnerId:"",qtty:""},jt=Object(c.b)((function(e){return{items:e.items.items,partners:e.partners.partners}}),(function(e){return{onItemAdded:function(t){e(tt(t))},onItemEdited:function(t){e(ot(t))},onModalTitleChanged:function(t){e(lt(t))}}}))((function(e){var t,n,r=e.itemId,o=e.items,c=e.partners,a=e.onItemAdded,s=e.onModalTitleChanged,i=e.onItemEdited,l=o.find((function(e){return e.id===r})),d=Object(O.useState)(null!=l?l:bt),p=f()(d,2),b=p[0],j=p[1],h=Object(ie.p)(),m=Object(O.useState)(c.map((function(e){return{id:e.id,title:e.name}}))),y=f()(m,1)[0];s(l?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430");var x=function(e,t){j(pt(pt({},b),{},u()({},e,t)))};return Object(V.jsxs)(Fe,{children:[Object(V.jsx)(ne,{label:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:",onChangeText:function(e){return x("name",e)},value:b.name,border:!0}),Object(V.jsx)(ze,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u0447\u0438\u043a",selectedItem:l?{id:l.partnerId,title:null!=(t=null==(n=c.find((function(e){return e.id===l.partnerId})))?void 0:n.name)?t:""}:void 0,items:y,handleItemChosen:function(e){j(pt(pt({},b),{},{partnerId:e}))},label:"\u0418\u043c\u0435 \u043d\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u0447\u0438\u043a",border:!0,style:{marginBottom:15}}),!l&&Object(V.jsx)(ne,{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return x("basePrice",e)},value:b.basePrice.toString(),keyboardType:"numeric",border:!0}),!l&&Object(V.jsx)(ne,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:",onChangeText:function(e){return x("qtty",e)},value:b.qtty,keyboardType:"numeric",border:!0}),Object(V.jsx)(ne,{label:"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return x("sellPrice",e)},value:b.sellPrice.toString(),keyboardType:"numeric",border:!0}),Object(V.jsx)(re,{label:l?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",onPress:function(){l?i(b):a(b),j(bt),h.navigate("ItemsListScreen")}})]})})),ht=n(2),Ot=n.n(ht),mt=n(3),yt=n.n(mt),xt=n(7),gt=n.n(xt),vt=n(16),wt=n.n(vt),Pt=n(4),St=n.n(Pt),Dt=n(343),Et=n(159),Tt=n(261),It=function(e){var t=new Date(e);return kt(t.getDate())+"."+kt(t.getMonth()+1)+"."+t.getFullYear()+" "+kt(t.getHours())+":"+kt(t.getMinutes())},kt=function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},Ct=function(e){return(Math.round(100*e)/100).toFixed(2)},Rt=function(e){var t=Number(e);return(Math.round(100*t)/100).toFixed(2)},At=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,c=e.additionalActions,s=e.showDeleted,i=Object(O.useState)(""),u=f()(i,2),l=u[0],d=u[1],p=Object(O.useRef)(new Ve.a.Value(300)).current,j=Object(a.b)(),h=function(e,t,n){return n.alert(t.title,t.content,[{text:t.cancelBtnTxt},{text:t.acceptBtnTxt,onPress:function(){return t.onAction(e)}}])};return Object(V.jsx)(V.Fragment,{children:n&&n.map((function(e){return(!s||s.showDeleted||!s.showDeleted&&!e.isDeleted)&&Object(V.jsx)(Tt.a,{onSwipeLeft:function(){e.id!==l&&(p.setValue(300),d(e.id),Ve.a.timing(p,{toValue:0,duration:200,useNativeDriver:!0}).start())},onSwipeRight:function(){Ve.a.timing(p,{toValue:300,duration:200,useNativeDriver:!0}).start((function(){return d("")}))},children:Object(V.jsxs)(Dt.a.Row,{style:{backgroundColor:e.isDeleted?"rgba(255, 0, 0, 0.05)":"white"},children:[t.map((function(t){var n;return Object(V.jsx)(Dt.a.Cell,{style:{flex:null!=(n=t.flex)?n:1},children:t.isMoney?Ct(Number(e[t.propName])):e[t.propName]},t.name)})),l==e.id&&(o||r||c||s&&e.isDeleted)&&Object(V.jsxs)(Ve.a.View,{style:{alignSelf:"center",flexDirection:"row",transform:[{translateX:p}]},children:[c&&c.map((function(t){return Object(V.jsx)(b.a,{name:t.name,size:30,color:t.color,style:{alignSelf:"center",marginRight:10},onPress:function(){t.onPress(e),d("")}})})),o&&Object(V.jsx)(b.a,{name:"edit",size:30,color:"green",style:{alignSelf:"center",marginRight:10},onPress:function(){o(e.id),d("")}}),r&&!e.isDeleted&&Object(V.jsx)(b.a,{name:"remove",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return h(e.id,r,j)}}),s&&e.isDeleted&&Object(V.jsx)(b.a,{name:"arrow-down",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return h(e.id,s.recoverProps,j)}})]},e.id)]})},e.id)}))})},_t=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,c=e.additionalActions,s=e.showDeleted,i=Object(a.b)(),u=function(e,t,n){return n.alert(t.title,t.content,[{text:t.cancelBtnTxt},{text:t.acceptBtnTxt,onPress:function(){return t.onAction(e)}}])};return Object(V.jsx)(V.Fragment,{children:n&&Array.isArray(n)&&n.map((function(e){return(!s||s.showDeleted||!s.showDeleted&&!e.isDeleted)&&Object(V.jsxs)(Dt.a.Row,{style:{backgroundColor:e.isDeleted?"rgba(255, 0, 0, 0.05)":"white"},children:[t.map((function(t){var n;return Object(V.jsx)(Dt.a.Cell,{style:{flex:null!=(n=t.flex)?n:1},children:t.isMoney?Ct(Number(e[t.propName])):e[t.propName]},t.name)})),(o||r||c||s&&e.isDeleted)&&Object(V.jsxs)(Ve.a.View,{style:{alignSelf:"center",flexDirection:"row"},children:[c&&c.map((function(t){return Object(V.jsx)(b.a,{name:t.name,size:30,color:t.color,style:{alignSelf:"center",marginRight:10},onPress:function(){return t.onPress(e)}})})),o&&Object(V.jsx)(b.a,{name:"edit",size:30,color:"green",style:{alignSelf:"center",marginRight:10},onPress:function(){return o(e.id)}}),r&&!e.isDeleted&&Object(V.jsx)(b.a,{name:"remove",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return u(e.id,r,i)}}),s&&e.isDeleted&&Object(V.jsx)(b.a,{name:"arrow-down",size:30,color:"green",style:{alignSelf:"center",paddingBottom:4},onPress:function(){return u(e.id,s.recoverProps,i)}})]},e.id)]},e.id)}))})},Lt=function(e){var t=e.columns,n=e.data,r=e.deleteProps,o=e.onEdit,c=e.additionalActions,a=e.showDeleted;return Object(V.jsxs)(Dt.a,{style:{width:q(300)},children:[function(e){var t=e.columns;return Object(V.jsx)(Dt.a.Header,{children:Object(V.jsxs)(V.Fragment,{children:[t&&t.map((function(e){var t;return Object(V.jsx)(Dt.a.Title,{style:{flex:null!=(t=e.flex)?t:1},children:e.name},e.name)})),a&&Object(V.jsx)(Et.a,{trackColor:{false:"#767577",true:"#81b0ff"},thumbColor:a.showDeleted?"#f5dd4b":"#f4f3f4",ios_backgroundColor:"#3e3e3e",onValueChange:a.setShowDeleted,style:{alignSelf:"flex-end",marginBottom:14},value:a.showDeleted})]})})}({columns:t}),G?Object(V.jsx)(At,{columns:t,data:n,deleteProps:r,onEdit:o,additionalActions:c,showDeleted:a}):Object(V.jsx)(_t,{columns:t,data:n,deleteProps:r,onEdit:o,additionalActions:c,showDeleted:a})]})};function Nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=St()(e);if(t){var o=St()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt()(this,n)}}var Bt=function(e){gt()(n,e);var t=Nt(n);function n(){return Ot()(this,n),t.apply(this,arguments)}return yt()(n)}(m.a.Component);function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=Object(c.b)(null,(function(e){return{onModalTitleChanged:function(t){e(lt(t))},onBuyItem:function(t){e(at(t))}}}))((function(e){var t=e.item,n=e.onModalTitleChanged,r=e.onBuyItem,o=Object(O.useState)(Ut(Ut({},t),{},{qtty:"1"})),c=f()(o,2),a=c[0],s=c[1],i=function(e,t){s(Ut(Ut({},a),{},u()({},e,t)))},l=Object(ie.p)();return Object(O.useEffect)((function(){return n("\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430")})),Object(V.jsxs)(Fe,{children:[Object(V.jsx)(ne,{label:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:",value:a.name,border:!0}),Object(V.jsx)(ne,{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430:",onChangeText:function(e){return i("basePrice",e)},value:a.basePrice,keyboardType:"numeric",border:!0}),Object(V.jsx)(ne,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:",onChangeText:function(e){return i("qtty",e)},value:a.qtty,keyboardType:"numeric",border:!0}),Object(V.jsx)(ne,{label:"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430:",value:a.sellPrice,keyboardType:"numeric",border:!0}),Object(V.jsxs)($,{style:{margin:0},children:["\u0421\u0443\u043c\u0430 \u0437\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0430:"," ",Ct(Number(a.qtty)*Number(a.basePrice))]}),Object(V.jsx)(re,{label:"\u0417\u0430\u0432\u044a\u0440\u0448\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0430",onPress:function(){r({qtty:a.qtty,basePrice:a.basePrice,itemId:a.id}),l.goBack()}})]})}));function qt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=St()(e);if(t){var o=St()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt()(this,n)}}var Gt=function(e){gt()(n,e);var t=qt(n);function n(){var e;Ot()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(ct(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(V.jsx)(jt,{itemId:t})})},e}return yt()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.listableItems,r=t.columns,o=t.showDeleted,c=[{name:"plus",color:"green",onPress:function(t){e.props.navigation.navigate("Modal",{component:Object(V.jsx)(Wt,{item:t})})}}];return Object(V.jsx)(Lt,{data:n,columns:r,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u0441\u0442\u043e\u043a\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,additionalActions:c,showDeleted:o})}}]),n}(Bt),Vt=Object(c.b)((function(e){return{items:e.items.items}}))(Gt),zt=Object(c.b)((function(e){return{items:e.items.items,showDeleted:e.items.showDeleted}}),(function(e){return{onItemsLoaded:function(){e(nt())},onItemRecovery:function(t){e(st(t))},onAllItemsLoaded:function(){e(rt())},onShowDeletedChanged:function(t){e(it(t))}}}))((function(e){var t=e.items,n=e.onItemsLoaded,r=e.onAllItemsLoaded,o=e.onItemRecovery,c=e.showDeleted,a=e.onShowDeletedChanged,s=Object(ie.p)();Object(O.useEffect)((function(){c?r():n()}),[c]);var i=[{name:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",propName:"name",flex:6},{name:G?"\u0414-\u043d\u0430 \u0446\u0435\u043d\u0430":"\u0414\u043e\u0441\u0442\u0430\u0432\u043d\u0430 \u0446\u0435\u043d\u0430",propName:"basePrice",flex:G?2:1,isRight:!0,isMoney:!0},{name:G?"\u041f-\u043d\u0430 \u0446\u0435\u043d\u0430":"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430",propName:"sellPrice",flex:G?2:1,isRight:!0,isMoney:!0},{name:"\u041a-\u0432\u043e",propName:"qtty",flex:1,isRight:!0,isMoney:!0}];return Object(V.jsx)(Fe,{children:Object(V.jsx)(Vt,{columns:i,listableItems:t,navigation:s,showDeleted:{showDeleted:c,setShowDeleted:a,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u0441\u0442\u043e\u043a\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:o}}})})}));function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt=function(e){return{type:"ADD_PARTNER",partner:e}},Jt=function(e){return{type:"EDIT_PARTNER",partner:e}},Yt=function(e){return{type:"LOAD_PARTNERS",partners:e}},Xt=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=xe,n.t1=Ht,n.t2=Ht({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/partners/",n.t6).then((function(e){t(Kt(e))})).catch((function(e){return console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},Zt=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/partners/get-all?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){t&&Array.isArray(t)&&e(Yt(t))})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},$t=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ye,n.t1=Ht,n.t2=Ht({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/partners/",n.t6).then((function(n){return n&&t(Jt(e))}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},Qt=function(e){return function(t){ge("api/partners/",e).then((function(n){return n&&t(function(e){return{type:"DELETE_PARTNER",partnerId:e}}(e))}))}},en=function(e){return function(t){xe("api/partners/partner-recovery",e).then((function(e){t(Jt(e))}))}},tn=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},nn={partners:[],showDeleted:!1};function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cn={id:"",address:"",name:"",vatNumber:""},an=Object(c.b)((function(e){return e.partners}),(function(e){return{onPartnerAdded:function(t){e(Xt(t))},onPartnerEdited:function(t){e($t(t))},onModalTitleChanged:function(t){e(lt(t))}}}))((function(e){var t=e.onPartnerAdded,n=e.partners,r=e.onModalTitleChanged,o=e.onPartnerEdited,c=e.partnerId,a=n&&n.find((function(e){return e.id===c})),s=Object(O.useState)(null!=a?a:cn),i=f()(s,2),l=i[0],d=i[1],p=Object(ie.p)();r(a?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440");var b=function(e,t){d(on(on({},l),{},u()({},e,t)))};return Object(V.jsxs)(Fe,{children:[Object(V.jsx)(ne,{label:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430:",onChangeText:function(e){return b("name",e)},value:l.name,border:!0}),Object(V.jsx)(ne,{label:"\u0414\u0414\u0421 \u041d\u043e\u043c\u0435\u0440:",onChangeText:function(e){return b("vatNumber",e)},value:l.vatNumber,border:!0}),Object(V.jsx)(ne,{label:"\u0410\u0434\u0440\u0435\u0441:",onChangeText:function(e){return b("address",e)},value:l.address,border:!0}),Object(V.jsx)(re,{label:a?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435",onPress:function(){a?o(l):t(l),d(cn),p.navigate("PartnersListScreen")}})]})}));function sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=St()(e);if(t){var o=St()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt()(this,n)}}var un=function(e){gt()(n,e);var t=sn(n);function n(){var e;Ot()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(Qt(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(V.jsx)(an,{partnerId:t})})},e}return yt()(n,[{key:"render",value:function(){var e=this.props,t=e.listableItems,n=e.columns,r=e.showDeleted;return Object(V.jsx)(Lt,{data:t,columns:n,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u044f\u0442 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,showDeleted:r})}}]),n}(Bt),ln=Object(c.b)((function(e){return{partners:e.partners.partners}}))(un),fn=Object(c.b)((function(e){return{partners:e.partners.partners,showDeleted:e.partners.showDeleted}}),(function(e){return{onPartnersLoaded:function(){e(Zt())},onPartnerRecovery:function(t){e(en(t))},setShowDeleted:function(t){e(tn(t))}}}))((function(e){var t=e.onPartnersLoaded,n=e.partners,r=e.onPartnerRecovery,o=e.setShowDeleted,c=e.showDeleted;Object(O.useEffect)((function(){return t()}),[c]);return Object(V.jsx)(Fe,{children:Object(V.jsx)(ln,{columns:[{name:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",propName:"name",flex:4},{name:"\u0414\u0414\u0421 \u041d\u043e\u043c\u0435\u0440",propName:"vatNumber",flex:1,isRight:!0},{name:"\u0410\u0434\u0440\u0435\u0441",propName:"address",flex:2,isRight:!0}],listableItems:n,navigation:Object(ie.p)(),showDeleted:{setShowDeleted:o,showDeleted:c,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u044f \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:r}}})})}));function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bn=function(e){return{type:"ADD_SALE",sale:e}},jn=function(e){return{type:"EDIT_SALE",sale:e}},hn=function(e){return{type:"LOAD_SALES",sales:e}},On=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=xe,n.t1=pn,n.t2=pn({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/sales/",n.t6).then((function(e){t(bn(e))})).catch((function(e){console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},mn=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/sales?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){e(hn(t))})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},yn=function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=me,t.next=3,p.a.awrap(Ee());case 3:t.t1=t.sent,t.t2="api/sales/get-all?accessToken="+t.t1,(0,t.t0)(t.t2).then((function(t){t&&Array.isArray(t)&&e(hn(t))})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),null,null,null,Promise)}},xn=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ye,n.t1=pn,n.t2=pn({},e),n.t3={},n.next=6,p.a.awrap(Ee());case 6:n.t4=n.sent,n.t5={accessToken:n.t4},n.t6=(0,n.t1)(n.t2,n.t3,n.t5),(0,n.t0)("api/sales/",n.t6).then((function(n){n&&t(jn(e))})).catch((function(e){console.log(e)}));case 10:case"end":return n.stop()}}),null,null,null,Promise)}},gn=function(e){return function(t){ge("api/sales/",e).then((function(n){n&&t(function(e){return{type:"DELETE_SALE",saleId:e}}(e))}))}},vn=function(e){return function(t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=xe,n.t1=e,n.next=4,p.a.awrap(Ee());case 4:n.t2=n.sent,n.t3={saleId:n.t1,accessToken:n.t2},(0,n.t0)("api/sales/sale-recovery",n.t3).then((function(e){t(jn(e))}));case 7:case"end":return n.stop()}}),null,null,null,Promise)}},wn=function(e){return function(t){t(function(e){return{type:"SET_SHOW_DELETED",showDeleted:e}}(e))}},Pn={sales:[],showDeleted:!1},Sn=function(){return(Math.random()+1).toString(36).substring(7)};function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tn=function(e){var t,n=e.items,r=e.saleItems,o=e.setSelectedItems,c=(e.sale,Object(O.useState)({id:"",title:""})),a=f()(c,2),s=a[0],i=a[1],u=Object(O.useState)(n.map((function(e){return{id:e.id,title:e.name}}))),l=f()(u,1)[0];return Object(V.jsxs)(Q,{style:{width:q(300),height:U()-250},children:[Object(V.jsxs)(Q,{style:{display:"flex",flexDirection:"row",borderBottomWidth:2,borderBottomColor:"grey",backgroundColor:"none"},children:[Object(V.jsx)(Q,{style:{flexDirection:"row",flex:5,justifyContent:"flex-start"},children:Object(V.jsx)($,{style:{margin:0},children:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430\u0442\u0430:"})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"center"},children:Object(V.jsx)($,{children:G?"\u041a-\u0432\u043e":"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(V.jsx)($,{children:G?"\u0426\u0435\u043d\u0430":"\u0426\u0435\u043d\u0430:"})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(V.jsx)($,{children:G?"\u041e\u0431\u0449\u043e":"\u041e\u0431\u0449\u043e \u0441\u0443\u043c\u0430:"})})]}),r&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(Q,{style:{height:G?U()-400:U()-290,overflow:"scroll"},children:[r.map((function(e){var t,c=Number(e.qtty)<=Number(null==(t=n.find((function(t){return t.id===e.itemId})))?void 0:t.qtty);return Object(V.jsxs)(Q,{style:{display:"flex",flexDirection:"row",borderBottomWidth:1,borderBottomColor:"grey"},children:[Object(V.jsx)(Q,{style:{flexDirection:"row",flex:5,alignSelf:"stretch"},children:Object(V.jsx)(ze,{selectedItem:{id:e.itemId,title:e.name},placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",items:l,handleItemChosen:function(t){setTimeout((function(){var c=n.find((function(e){return e.id===t}));o(r.map((function(t){return e.uniqueId===t.uniqueId?{id:"",uniqueId:Sn(),itemId:c.id,name:c.name,qtty:"1",price:c.sellPrice,total:Ct(Number(c.sellPrice))}:t})))}),300)}},e.itemId)}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,alignSelf:"stretch"},children:Object(V.jsx)(ne,{autoFocus:!0,keyboardType:"numeric",style:{textAlign:"center",borderWidth:c?0:1,borderColor:c?"white":"red",alignSelf:"stretch",width:"100%"},value:e.qtty.toString(),onChangeText:function(t){return o(r.map((function(n){return e.uniqueId===n.uniqueId?En(En({},n),{},{qtty:t,total:Ct(Number(t)*Number(n.price))}):n})))}})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,alignSelf:"stretch"},children:Object(V.jsx)(ne,{style:{textAlign:"center",borderWidth:0,alignSelf:"stretch",width:"100%"},keyboardType:"numeric",value:e.price.toString(),onChangeText:function(t){return o(r.map((function(n){return e.uniqueId===n.uniqueId?En(En({},n),{},{price:t,total:Ct(Number(n.qtty)*Number(t))}):n})))}})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,alignSelf:"stretch",width:"100%"},children:Object(V.jsx)($,{children:Rt(e.total)})})]},e.itemId)})),Object(V.jsxs)(Q,{style:{display:"flex",flexDirection:"row",borderBottomWidth:1,borderBottomColor:"grey"},children:[Object(V.jsx)(Q,{style:{flexDirection:"row",flex:5},children:Object(V.jsx)(ze,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",selectedItem:s,items:l,handleItemChosen:function(e){var t=n.find((function(t){return t.id===e}));o([].concat(Je()(r),[{id:"",uniqueId:Sn(),itemId:t.id,name:t.name,qtty:"1",price:t.sellPrice,total:Ct(Number(t.sellPrice))}])),i({id:"",title:""})}})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"center"},children:Object(V.jsx)($,{})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(V.jsx)($,{})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"},children:Object(V.jsx)($,{})})]})]}),Object(V.jsxs)(Q,{style:{display:"flex",flexDirection:"row",borderBottomWidth:2,borderBottomColor:"grey",backgroundColor:"none",height:30},children:[Object(V.jsx)(Q,{style:{flexDirection:"row",flex:6,justifyContent:"flex-end"},children:Object(V.jsx)($,{style:{margin:0},children:"\u041e\u0431\u0449\u043e \u0441\u0443\u043c\u0430:"})}),Object(V.jsx)(Q,{style:{flexDirection:"row",flex:1,justifyContent:"flex-end",paddingBottom:7},children:Object(V.jsx)($,{children:Ct(r.length>0?null==r||null==(t=r.map((function(e){return Number(e.total)})))?void 0:t.reduce((function(e,t){return e+t})):0)})})]})]})]})};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cn={id:"",date:new Date,isDeleted:!1,description:"",saleItems:[],partnerId:"",totalAmount:0},Rn=Object(c.b)((function(e){return{sales:e.sales.sales,partners:e.partners.partners,items:e.items.items}}),(function(e){return{onSaleAdded:function(t){e(On(t))},onSaleEdited:function(t){e(xn(t))},onModalTitleChanged:function(t){e(lt(t))}}}))((function(e){var t,n,r=e.saleId,o=e.sales,c=e.onSaleAdded,a=e.onModalTitleChanged,s=e.onSaleEdited,i=e.partners,u=e.items,l=o.find((function(e){return e.id===r})),d=Object(O.useState)(null!=l?l:Cn),p=f()(d,2),b=p[0],j=p[1],h=Object(O.useState)(i.map((function(e){return{id:e.id,title:e.name}}))),m=f()(h,1)[0],y=Object(ie.p)();a(l?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430");var x=Object(O.useState)(l?l.saleItems.map((function(e){return{uniqueId:Sn(),itemId:e.itemId,name:e.name,qtty:e.qtty,total:e.total,price:e.price,id:e.id}})):[]),g=f()(x,2),v=g[0],w=g[1];return Object(V.jsx)(Fe,{children:Object(V.jsxs)(Q,{style:{height:U()},children:[Object(V.jsx)(ze,{placeholder:"\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0438\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",selectedItem:l?{id:l.partnerId,title:null!=(t=null==(n=i.find((function(e){return e.id===l.partnerId})))?void 0:n.name)?t:""}:void 0,items:m,handleItemChosen:function(e){j(kn(kn({},b),{},{partnerId:e}))},label:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0430",border:!0,style:{marginBottom:15}}),Object(V.jsx)(Tn,{items:u,saleItems:v,setSelectedItems:w,sale:b}),Object(V.jsx)(re,{disabled:void 0===v||0===v.length||""===b.partnerId,label:l?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u043a\u0430":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",onPress:function(){b.totalAmount=v.map((function(e){return Number(e.total)})).reduce((function(e,t){return e+t})),b.saleItems=v,l?s(b):c(b),j(Cn),y.navigate("SalesListScreen")},style:{alignSelf:"center"}})]})})}));function An(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=St()(e);if(t){var o=St()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt()(this,n)}}var _n=function(e){gt()(n,e);var t=An(n);function n(){var e;Ot()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).onDelete=function(t){(0,e.props.dispatch)(gn(t))},e.onEdit=function(t){e.props.navigation.navigate("Modal",{component:Object(V.jsx)(Rn,{saleId:t})})},e}return yt()(n,[{key:"render",value:function(){var e=this.props,t=e.listableItems,n=e.columns,r=e.showDeleted;return Object(V.jsx)(Lt,{data:t,columns:n,deleteProps:{title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",onAction:this.onDelete},onEdit:this.onEdit,showDeleted:r})}}]),n}(Bt),Ln=Object(c.b)((function(e){return{sales:e.sales.sales}}))(_n),Nn=Object(c.b)((function(e){var t,n;return{sales:(null==(t=e.sales)?void 0:t.sales)||[],partners:(null==(n=e.partners)?void 0:n.partners)||[],showDeleted:e.sales.showDeleted}}),(function(e){return{onSalesLoaded:function(){e(mn())},onSaleRecovery:function(t){e(vn(t))},onAllSalesLoaded:function(){e(yn())},onPartnersLoaded:function(){e(Zt())},onItemsLoaded:function(){e(rt())},setShowDeleted:function(t){e(wn(t))}}}))((function(e){var t=e.sales,n=e.partners,r=e.onSalesLoaded,o=e.onSaleRecovery,c=e.onItemsLoaded,a=e.onPartnersLoaded,s=e.onAllSalesLoaded,i=e.showDeleted,u=e.setShowDeleted,l=Object(ie.p)();Object(O.useEffect)((function(){i?s():r(),c(),a()}),[i]);var f=[{name:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u0442\u043e\u043a\u0430",propName:"partner",flex:6},{name:"\u0414\u0430\u0442\u0430",propName:"date",flex:G?3:2},{name:"\u041e\u0431\u0449\u0430 \u0441\u0443\u043c\u0430",propName:"total",flex:G?2:1,isRight:!0}],d=t&&Array.isArray(t)?t.map((function(e){var t,r;return{id:e.id,partner:null!=(t=null==(r=n.find((function(t){return t.id===e.partnerId})))?void 0:r.name)?t:"",date:It(e.date),description:e.description,total:Ct(e.totalAmount),isDeleted:e.isDeleted}})):[];return Object(V.jsx)(Fe,{children:Object(V.jsx)(Ln,{columns:f,listableItems:d,navigation:l,showDeleted:{setShowDeleted:u,showDeleted:i,recoverProps:{title:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",content:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0432\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u0430\u0442\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",cancelBtnTxt:"\u041e\u0442\u043a\u0430\u0437",acceptBtnTxt:"\u0412\u044a\u0437\u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0432\u0430\u043d\u0435",onAction:o}}})})})),Bn=Object(c.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,n=Object(se.a)(),r=Object(ie.p)(),o=Object(O.useState)(!1),c=f()(o,2),a=c[0],s=c[1];return Object(O.useEffect)((function(){s(void 0!==t.username&&""!==t.username||void 0!==t.email&&""!==t.email)})),Object(V.jsx)(n.Navigator,{children:Object(V.jsx)(n.Group,{children:a?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(n.Screen,{name:"SalesListScreen",component:Nn,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441 \u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0438",headerTitleAlign:"center",headerRight:function(){return Object(V.jsxs)(Q,{style:{display:"flex"},children:[Object(V.jsx)(ue.a,{onPress:function(e){e.preventDefault(),r.navigate("Modal",{component:Object(V.jsx)(Rn,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(V.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})}),Object(V.jsx)(qe,{})]})}}}),Object(V.jsx)(n.Screen,{name:"ItemsListScreen",navigationKey:"/ItemsListScreen",component:zt,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441\u044a\u0441 \u0441\u0442\u043e\u043a\u0438",headerTitleAlign:"center",headerRight:function(){return Object(V.jsxs)(Q,{children:[Object(V.jsx)(ue.a,{onPress:function(e){e.preventDefault(),r.navigate("Modal",{component:Object(V.jsx)(jt,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(V.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})}),Object(V.jsx)(qe,{})]})}}}),Object(V.jsx)(n.Screen,{name:"PartnersListScreen",navigationKey:"PartnersListScreen",component:fn,options:{title:"\u0421\u043f\u0438\u0441\u044a\u043a \u0441 \u043f\u0430\u0440\u0442\u043d\u044c\u043e\u0440\u0438",headerTitleAlign:"center",headerRight:function(){return Object(V.jsxs)(Q,{children:[Object(V.jsx)(ue.a,{onPress:function(e){e.preventDefault(),r.navigate("Modal",{component:Object(V.jsx)(an,{})})},style:function(e){return{opacity:e.pressed?.5:1}},children:Object(V.jsx)(b.a,{name:"plus-circle",size:25,color:"green",style:{marginRight:15}})}),Object(V.jsx)(qe,{})]})}}})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(n.Screen,{name:"Login",component:We}),Object(V.jsx)(n.Screen,{name:"Register",component:Ge})]})})})})),Mn=Object(c.b)((function(e){return e.title}),(function(e){return{onInitUser:function(t){e(Be(t))}}}))((function(e){var t=e.colorScheme,n=e.title,r=e.onInitUser;return O.useEffect((function(){!function(){var e;p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(Pe());case 2:e=t.sent,r(e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}),[]),Object(V.jsx)(w.a,{linking:ae,theme:"dark"===t?P.a:S.a,children:Object(V.jsx)(Wn,{title:n})})})),Un=Object(D.a)();function Wn(e){var t=e.title;return Object(V.jsxs)(Un.Navigator,{children:[Object(V.jsx)(Un.Screen,{name:"Warehouse",component:Bn,options:{headerShown:!1}}),Object(V.jsx)(Un.Group,{screenOptions:{presentation:"modal"},children:Object(V.jsx)(Un.Screen,{name:"Modal",component:ce,options:{title:t,headerTitleAlign:"center"}})})]})}var qn=n(141),Gn=n(258),Vn={items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_ITEM":return Xe(Xe({},e),{},{items:[].concat(Je()(e.items),[n.item])});case"LOAD_ITEMS":case"LOAD_ALL_ITEMS":return Xe(Xe({},e),{},{items:n.items});case"EDIT_ITEM":return Xe(Xe({},e),{},{items:Je()(e.items.map((function(e){return e.id===n.item.id?Xe({},n.item):e})))});case"DELETE_ITEM":return Xe(Xe({},e),{},{items:e.showDeleted?Je()(e.items.map((function(e){return e.id===n.itemId?Xe(Xe({},e),{},{isDeleted:!0}):e}))):Je()(e.items.filter((function(e){return e.id!==n.itemId})))});case"BUY_ITEM":return Xe(Xe({},e),{},{items:Je()(e.items.map((function(e){return e.id===n.buyItem.itemId?Xe(Xe({},e),{},{qtty:(Number(e.qtty)+Number(n.buyItem.qtty)).toString(),basePrice:n.buyItem.basePrice}):e})))});case"SET_SHOW_DELETED":return Xe(Xe({},e),{},{showDeleted:n.showDeleted});default:return e}},title:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"CHANGE_TITLE":return{title:n.title};default:return e}},partners:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_PARTNER":return Ht(Ht({},e),{},{partners:[].concat(Je()(e.partners),[n.partner])});case"LOAD_PARTNERS":return Ht(Ht({},e),{},{partners:n.partners});case"EDIT_PARTNER":return Ht(Ht({},e),{},{partners:Je()(e.partners.map((function(e){return e.id===n.partner.id?Ht({},n.partner):e})))});case"DELETE_PARTNER":return Ht(Ht({},e),{},{partners:Je()(e.partners.map((function(e){return e.id===n.partnerId?Ht(Ht({},e),{},{isDeleted:!0}):e})))});case"SET_SHOW_DELETED":return Ht(Ht({},e),{},{showDeleted:n.showDeleted});default:return e}},sales:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"ADD_SALE":return pn(pn({},e),{},{sales:[].concat(Je()(e.sales),[n.sale])});case"LOAD_SALES":case"LOAD_ALL_SALES":return pn(pn({},e),{},{sales:n.sales});case"EDIT_SALE":return pn(pn({},e),{},{sales:Je()(e.sales.map((function(e){return e.id===n.sale.id?pn({},n.sale):e})))});case"DELETE_SALE":return pn(pn({},e),{},{sales:e.showDeleted?Je()(e.sales.map((function(e){return e.id===n.saleId?pn(pn({},e),{},{isDeleted:!0}):e}))):Je()(e.sales.filter((function(e){return e.id!==n.saleId})))});case"SET_SHOW_DELETED":return pn(pn({},e),{},{showDeleted:n.showDeleted});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0,n=t;switch(n.type){case"LOGIN_USER":case"INIT_USER":return Ae({},n.user);case"LOGOUT":return Ae({},Ue);default:return e}}};function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){var t=[Gn.a],n=Object(qn.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Vn)),r=[],o="undefined"===typeof window?null:window;return o&&o.__REDUX_DEVTOOLS_EXTENSION__&&r.push(o.__REDUX_DEVTOOLS_EXTENSION__()),Object(qn.d)(n,e,qn.c.apply(void 0,[qn.a.apply(void 0,t)].concat(r)))}!function(){if("web"===E.a.OS){var e=document.createElement("style");e.textContent="textarea, select, input, button { outline: none !important; }",e.textContent+="div::-webkit-scrollbar { width: 0; }",document.head.append(e)}}();t.a=function(){var e=function(){var e=Object(O.useState)(!1),t=f()(e,2),r=t[0],o=t[1];return Object(O.useEffect)((function(){p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h.b(),e.next=4,p.a.awrap(j.b(x(x({},b.a.font),{},{"space-mono":n(298)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),h.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=v(),i=Fn();return e?Object(V.jsxs)(o.b,{children:[Object(V.jsx)(c.a,{store:i,children:Object(V.jsx)(s.a,{children:Object(V.jsx)(a.a,{children:Object(V.jsx)(Mn,{colorScheme:t,title:i.getState().title.title})})})}),Object(V.jsx)(r.a,{})]}):null}},268:function(e,t,n){e.exports=n(328)},298:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},308:function(e,t){}},[[268,1,2]]]);
//# sourceMappingURL=app.903b89dd.chunk.js.map